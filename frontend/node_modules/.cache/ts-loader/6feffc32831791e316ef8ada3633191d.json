{"remainingRequest":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/thread-loader/dist/cjs.js!/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/babel-loader/lib/index.js!/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/ts-loader/index.js??ref--14-3!/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/eslint-loader/index.js??ref--13-0!/Users/erfalk/ws_filedgr/filedgr-streams-front/src/auth/AuthGuard.ts","dependencies":[{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/src/auth/AuthGuard.ts","mtime":1605396246739},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZ2V0SW5zdGFuY2UgfSBmcm9tICdAL2F1dGgvQXV0aDBQbHVnaW4nOwpleHBvcnQgdmFyIEF1dGhHdWFyZCA9IGZ1bmN0aW9uIEF1dGhHdWFyZCh0bywgZnJvbSwgbmV4dCkgewogIHZhciBhdXRoU2VydmljZSA9IGdldEluc3RhbmNlKCk7CgogIHZhciBmbiA9IGZ1bmN0aW9uIGZuKCkgewogICAgdW53YXRjaCAmJiB1bndhdGNoKCk7CgogICAgaWYgKHRvLmZ1bGxQYXRoID09ICcvJyAmJiBhdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQpIHsKICAgICAgcmV0dXJuIG5leHQoJy9kYXNoYm9hcmQnKTsKICAgIH0KCiAgICBpZiAodG8uZnVsbFBhdGggPT0gJy8nICYmICFhdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQpIHsKICAgICAgcmV0dXJuIG5leHQoKTsKICAgIH0KCiAgICBpZiAoYXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKSB7CiAgICAgIHJldHVybiBuZXh0KCk7CiAgICB9CgogICAgYXV0aFNlcnZpY2UubG9naW5XaXRoUmVkaXJlY3QoewogICAgICBhcHBTdGF0ZTogewogICAgICAgIHRhcmdldFVybDogdG8uZnVsbFBhdGgKICAgICAgfQogICAgfSk7CiAgfTsKCiAgaWYgKCFhdXRoU2VydmljZS5sb2FkaW5nKSB7CiAgICByZXR1cm4gZm4oKTsKICB9CgogIHZhciB1bndhdGNoID0gYXV0aFNlcnZpY2UuJHdhdGNoKCdsb2FkaW5nJywgZnVuY3Rpb24gKGxvYWRpbmcpIHsKICAgIGlmIChsb2FkaW5nID09PSBmYWxzZSkgewogICAgICByZXR1cm4gZm4oKTsKICAgIH0KICB9KTsKfTs="},{"version":3,"sources":["/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/eslint-loader/index.js??ref--13-0!/Users/erfalk/ws_filedgr/filedgr-streams-front/src/auth/AuthGuard.ts"],"names":[],"mappings":"AACA,SAAS,WAAT,QAA4B,oBAA5B;AAEA,OAAO,IAAM,SAAS,GAAoB,SAA7B,SAA6B,CAAC,EAAD,EAAK,IAAL,EAAW,IAAX,EAAmB;AAC3D,MAAM,WAAW,GAAG,WAAW,EAA/B;;AAEA,MAAM,EAAE,GAAG,SAAL,EAAK,GAAK;AACd,IAAA,OAAO,IAAI,OAAO,EAAlB;;AAEA,QAAI,EAAE,CAAC,QAAH,IAAe,GAAf,IAAsB,WAAW,CAAC,eAAtC,EAAuD;AACrD,aAAO,IAAI,CAAC,YAAD,CAAX;AACD;;AACD,QAAI,EAAE,CAAC,QAAH,IAAe,GAAf,IAAsB,CAAC,WAAW,CAAC,eAAvC,EAAwD;AACtD,aAAO,IAAI,EAAX;AACD;;AACD,QAAI,WAAW,CAAC,eAAhB,EAAiC;AAC/B,aAAO,IAAI,EAAX;AACD;;AAED,IAAA,WAAW,CAAC,iBAAZ,CAA8B;AAAE,MAAA,QAAQ,EAAE;AAAE,QAAA,SAAS,EAAE,EAAE,CAAC;AAAhB;AAAZ,KAA9B;AACD,GAdD;;AAgBA,MAAI,CAAC,WAAW,CAAC,OAAjB,EAA0B;AACxB,WAAO,EAAE,EAAT;AACD;;AAED,MAAM,OAAO,GAAG,WAAW,CAAC,MAAZ,CAAmB,SAAnB,EAA8B,UAAC,OAAD,EAAqB;AACjE,QAAI,OAAO,KAAK,KAAhB,EAAuB;AACrB,aAAO,EAAE,EAAT;AACD;AACF,GAJe,CAAhB;AAKD,CA5BM","sourcesContent":["import { NavigationGuard } from 'vue-router'\r\nimport { getInstance } from '@/auth/Auth0Plugin'\r\n\r\nexport const AuthGuard: NavigationGuard = (to, from, next) => {\r\n  const authService = getInstance()\r\n\r\n  const fn = () => {\r\n    unwatch && unwatch()\r\n\r\n    if (to.fullPath == '/' && authService.isAuthenticated) {\r\n      return next('/dashboard')\r\n    }\r\n    if (to.fullPath == '/' && !authService.isAuthenticated) {\r\n      return next()\r\n    }\r\n    if (authService.isAuthenticated) {\r\n      return next()\r\n    }\r\n\r\n    authService.loginWithRedirect({ appState: { targetUrl: to.fullPath } })\r\n  }\r\n\r\n  if (!authService.loading) {\r\n    return fn()\r\n  }\r\n\r\n  const unwatch = authService.$watch('loading', (loading: boolean) => {\r\n    if (loading === false) {\r\n      return fn()\r\n    }\r\n  })\r\n}\r\n"],"sourceRoot":""}]}