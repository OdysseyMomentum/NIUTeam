{"remainingRequest":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/thread-loader/dist/cjs.js!/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/babel-loader/lib/index.js!/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/ts-loader/index.js??ref--14-3!/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/eslint-loader/index.js??ref--13-0!/Users/erfalk/ws_filedgr/filedgr-streams-front/src/auth/AuthWrapper.ts","dependencies":[{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/src/auth/AuthWrapper.ts","mtime":1604312863667},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2giOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvZXJmYWxrL3dzX2ZpbGVkZ3IvZmlsZWRnci1zdHJlYW1zLWZyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvZXJmYWxrL3dzX2ZpbGVkZ3IvZmlsZWRnci1zdHJlYW1zLWZyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL2VyZmFsay93c19maWxlZGdyL2ZpbGVkZ3Itc3RyZWFtcy1mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9Vc2Vycy9lcmZhbGsvd3NfZmlsZWRnci9maWxlZGdyLXN0cmVhbXMtZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvVXNlcnMvZXJmYWxrL3dzX2ZpbGVkZ3IvZmlsZWRnci1zdHJlYW1zLWZyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tICJ0c2xpYiI7CmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCB7IFVzZXIgfSBmcm9tICdAL2F1dGgvVXNlcic7CmltcG9ydCBjcmVhdGVBdXRoMENsaWVudCBmcm9tICdAYXV0aDAvYXV0aDAtc3BhLWpzJzsKCnZhciBBdXRoV3JhcHBlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Z1ZSkgewogIF9pbmhlcml0cyhBdXRoV3JhcHBlciwgX1Z1ZSk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoQXV0aFdyYXBwZXIpOwoKICBmdW5jdGlvbiBBdXRoV3JhcHBlcigpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXV0aFdyYXBwZXIpOwoKICAgIF90aGlzID0gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICBfdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgIF90aGlzLmlzQXV0aGVudGljYXRlZCA9IGZhbHNlOwogICAgX3RoaXMucG9wdXBPcGVuID0gZmFsc2U7CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQXV0aFdyYXBwZXIsIFt7CiAgICBrZXk6ICJnZXRVc2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0VXNlciA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX3RoaXMkYXV0aDBDbGllbnQ7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gVXNlcjsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIChfdGhpcyRhdXRoMENsaWVudCA9IHRoaXMuYXV0aDBDbGllbnQpID09PSBudWxsIHx8IF90aGlzJGF1dGgwQ2xpZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRhdXRoMENsaWVudC5nZXRVc2VyKCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQxID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIG5ldyBfY29udGV4dC50MChfY29udGV4dC50MSkpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0VXNlcigpIHsKICAgICAgICByZXR1cm4gX2dldFVzZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldFVzZXI7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJsb2dpbldpdGhQb3B1cCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2xvZ2luV2l0aFBvcHVwID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihwb3B1cExvZ2luT3B0aW9ucykgewogICAgICAgIHZhciBfdGhpcyRhdXRoMENsaWVudDI7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwT3BlbiA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gKF90aGlzJGF1dGgwQ2xpZW50MiA9IHRoaXMuYXV0aDBDbGllbnQpID09PSBudWxsIHx8IF90aGlzJGF1dGgwQ2xpZW50MiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkYXV0aDBDbGllbnQyLmxvZ2luV2l0aFBvcHVwKHBvcHVwTG9naW5PcHRpb25zKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDY7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0Mi50MCk7CiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gX2NvbnRleHQyLnQwOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxMDsKICAgICAgICAgICAgICAgIHRoaXMucG9wdXBPcGVuID0gZmFsc2U7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmZpbmlzaCgxMCk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VXNlcigpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgdGhpcy51c2VyID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICB0aGlzLmlzQXV0aGVudGljYXRlZCA9IHRydWU7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMsIFtbMSwgNiwgMTAsIDEzXV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBsb2dpbldpdGhQb3B1cChfeCkgewogICAgICAgIHJldHVybiBfbG9naW5XaXRoUG9wdXAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGxvZ2luV2l0aFBvcHVwOwogICAgfSgpCiAgfSwgewogICAga2V5OiAibG9naW5XaXRoUmVkaXJlY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvZ2luV2l0aFJlZGlyZWN0KHJlZGlyZWN0TG9naW5PcHRpb25zKSB7CiAgICAgIHZhciBfdGhpcyRhdXRoMENsaWVudDM7CgogICAgICByZXR1cm4gKF90aGlzJGF1dGgwQ2xpZW50MyA9IHRoaXMuYXV0aDBDbGllbnQpID09PSBudWxsIHx8IF90aGlzJGF1dGgwQ2xpZW50MyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkYXV0aDBDbGllbnQzLmxvZ2luV2l0aFJlZGlyZWN0KHJlZGlyZWN0TG9naW5PcHRpb25zKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRJZFRva2VuQ2xhaW1zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJZFRva2VuQ2xhaW1zKGdldElkVG9rZW5DbGFpbXNPcHRpb25zKSB7CiAgICAgIHZhciBfdGhpcyRhdXRoMENsaWVudDQ7CgogICAgICByZXR1cm4gKF90aGlzJGF1dGgwQ2xpZW50NCA9IHRoaXMuYXV0aDBDbGllbnQpID09PSBudWxsIHx8IF90aGlzJGF1dGgwQ2xpZW50NCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkYXV0aDBDbGllbnQ0LmdldElkVG9rZW5DbGFpbXMoZ2V0SWRUb2tlbkNsYWltc09wdGlvbnMpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFRva2VuU2lsZW50bHkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRva2VuU2lsZW50bHkoZ2V0VG9rZW5TaWxlbnRseU9wdGlvbnMpIHsKICAgICAgdmFyIF90aGlzJGF1dGgwQ2xpZW50NTsKCiAgICAgIHJldHVybiAoX3RoaXMkYXV0aDBDbGllbnQ1ID0gdGhpcy5hdXRoMENsaWVudCkgPT09IG51bGwgfHwgX3RoaXMkYXV0aDBDbGllbnQ1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRhdXRoMENsaWVudDUuZ2V0VG9rZW5TaWxlbnRseShnZXRUb2tlblNpbGVudGx5T3B0aW9ucyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VG9rZW5XaXRoUG9wdXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRva2VuV2l0aFBvcHVwKGdldFRva2VuV2l0aFBvcHVwT3B0aW9ucykgewogICAgICB2YXIgX3RoaXMkYXV0aDBDbGllbnQ2OwoKICAgICAgcmV0dXJuIChfdGhpcyRhdXRoMENsaWVudDYgPSB0aGlzLmF1dGgwQ2xpZW50KSA9PT0gbnVsbCB8fCBfdGhpcyRhdXRoMENsaWVudDYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGF1dGgwQ2xpZW50Ni5nZXRUb2tlbldpdGhQb3B1cChnZXRUb2tlbldpdGhQb3B1cE9wdGlvbnMpOwogICAgfQogIH0sIHsKICAgIGtleTogImxvZ291dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9nb3V0KGxvZ291dE9wdGlvbnMpIHsKICAgICAgdmFyIF90aGlzJGF1dGgwQ2xpZW50NzsKCiAgICAgIHJldHVybiAoX3RoaXMkYXV0aDBDbGllbnQ3ID0gdGhpcy5hdXRoMENsaWVudCkgPT09IG51bGwgfHwgX3RoaXMkYXV0aDBDbGllbnQ3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRhdXRoMENsaWVudDcubG9nb3V0KGxvZ291dE9wdGlvbnMpOwogICAgfSAvLyBXZSBpbml0aWFsaXplIGFsbCB0aGF0IHNoaXQgd2l0aCBvdXIgb3duIG1ldGhvZCAod2UgY2Fubm90IHBhc3MgYW55IHBhcmFtZXRlcnMgdG8gdGhlIGNyZWF0ZWQoKSBsaWZlY3ljbGUgaG9vaykuCgogIH0sIHsKICAgIGtleTogImluaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9pbml0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhvblJlZGlyZWN0Q2FsbGJhY2ssIHJlZGlyZWN0VXJpLCBhdXRoME9wdGlvbnMpIHsKICAgICAgICB2YXIgX3lpZWxkJHRoaXMkYXV0aDBDbGllLCBfdGhpcyRhdXRoMENsaWVudDgsIF9yZWYsIGFwcFN0YXRlLCBfdGhpcyRhdXRoMENsaWVudDk7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQXV0aDBDbGllbnQoewogICAgICAgICAgICAgICAgICBkb21haW46IGF1dGgwT3B0aW9ucy5kb21haW4sCiAgICAgICAgICAgICAgICAgIGNsaWVudF9pZDogYXV0aDBPcHRpb25zLmNsaWVudElkLAogICAgICAgICAgICAgICAgICBhdWRpZW5jZTogYXV0aDBPcHRpb25zLmF1ZGllbmNlLAogICAgICAgICAgICAgICAgICBjYWNoZUxvY2F0aW9uOiBhdXRoME9wdGlvbnMuY2FjaGVMb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgcmVkaXJlY3RfdXJpOiByZWRpcmVjdFVyaQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHRoaXMuYXV0aDBDbGllbnQgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMzsKCiAgICAgICAgICAgICAgICBpZiAoISh3aW5kb3cubG9jYXRpb24uc2VhcmNoLmluY2x1ZGVzKCdlcnJvcicpIHx8IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guaW5jbHVkZXMoJ2NvZGU9JykgJiYgd2luZG93LmxvY2F0aW9uLnNlYXJjaC5pbmNsdWRlcygnc3RhdGU9JykpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiAoX3RoaXMkYXV0aDBDbGllbnQ4ID0gdGhpcy5hdXRoMENsaWVudCkgPT09IG51bGwgfHwgX3RoaXMkYXV0aDBDbGllbnQ4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRhdXRoMENsaWVudDguaGFuZGxlUmVkaXJlY3RDYWxsYmFjaygpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDMudDEgPSBfeWllbGQkdGhpcyRhdXRoMENsaWUgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0My50MSAhPT0gbnVsbDsKCiAgICAgICAgICAgICAgICBpZiAoIV9jb250ZXh0My50MCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfeWllbGQkdGhpcyRhdXRoMENsaWUgIT09IHZvaWQgMDsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGlmICghX2NvbnRleHQzLnQwKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MiA9IF95aWVsZCR0aGlzJGF1dGgwQ2xpZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MiA9IHsKICAgICAgICAgICAgICAgICAgYXBwU3RhdGU6IHVuZGVmaW5lZAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIF9yZWYgPSBfY29udGV4dDMudDI7CiAgICAgICAgICAgICAgICBhcHBTdGF0ZSA9IF9yZWYuYXBwU3RhdGU7CiAgICAgICAgICAgICAgICBvblJlZGlyZWN0Q2FsbGJhY2soYXBwU3RhdGUpOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyNTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAyMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MyA9IF9jb250ZXh0M1siY2F0Y2giXSgzKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoX2NvbnRleHQzLnQzKTsKICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBfY29udGV4dDMudDM7CgogICAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDI1OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyODsKICAgICAgICAgICAgICAgIHJldHVybiAoX3RoaXMkYXV0aDBDbGllbnQ5ID0gdGhpcy5hdXRoMENsaWVudCkgPT09IG51bGwgfHwgX3RoaXMkYXV0aDBDbGllbnQ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRhdXRoMENsaWVudDkuaXNBdXRoZW50aWNhdGVkKCk7CgogICAgICAgICAgICAgIGNhc2UgMjg6CiAgICAgICAgICAgICAgICB0aGlzLmlzQXV0aGVudGljYXRlZCA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzMTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFVzZXIoKTsKCiAgICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICAgIHRoaXMudXNlciA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmZpbmlzaCgyNSk7CgogICAgICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMsIFtbMywgMjEsIDI1LCAzNF1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gaW5pdChfeDIsIF94MywgX3g0KSB7CiAgICAgICAgcmV0dXJuIF9pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBpbml0OwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gQXV0aFdyYXBwZXI7Cn0oVnVlKTsKCkF1dGhXcmFwcGVyID0gX19kZWNvcmF0ZShbQ29tcG9uZW50KHt9KV0sIEF1dGhXcmFwcGVyKTsKZXhwb3J0IHsgQXV0aFdyYXBwZXIgfTs="},{"version":3,"sources":["/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/eslint-loader/index.js??ref--13-0!/Users/erfalk/ws_filedgr/filedgr-streams-front/src/auth/AuthWrapper.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, Vue } from 'vue-property-decorator'\r\nimport { User } from '@/auth/User'\r\nimport createAuth0Client, {\r\n  Auth0Client, CacheLocation,\r\n  GetIdTokenClaimsOptions,\r\n  GetTokenSilentlyOptions, GetTokenWithPopupOptions, IdToken, LogoutOptions,\r\n  PopupLoginOptions,\r\n  RedirectLoginOptions\r\n} from '@auth0/auth0-spa-js'\r\n\r\nexport type Auth0Options = {\r\n  domain: string;\r\n  clientId: string;\r\n  audience: string;\r\n  cacheLocation: CacheLocation;\r\n  [key: string]: string | undefined;\r\n}\r\n\r\n// @ts-ignore\r\nexport type RedirectCallback = (appState) => void\r\n\r\n@Component({})\r\nexport class AuthWrapper extends Vue {\r\n  loading = true\r\n  isAuthenticated? = false\r\n  user?: User\r\n  auth0Client?: Auth0Client\r\n  popupOpen = false\r\n  error?: Error\r\n\r\n  async getUser () {\r\n    return new User(await this.auth0Client?.getUser())\r\n  }\r\n\r\n  async loginWithPopup (popupLoginOptions: PopupLoginOptions) {\r\n    this.popupOpen = true\r\n\r\n    try {\r\n      await this.auth0Client?.loginWithPopup(popupLoginOptions)\r\n    } catch (e) {\r\n      console.error(e)\r\n      this.error = e\r\n    } finally {\r\n      this.popupOpen = false\r\n    }\r\n\r\n    this.user = await this.getUser()\r\n    this.isAuthenticated = true\r\n  }\r\n\r\n  loginWithRedirect (redirectLoginOptions: RedirectLoginOptions): Promise<void> | undefined {\r\n    return this.auth0Client?.loginWithRedirect(redirectLoginOptions)\r\n  }\r\n\r\n  getIdTokenClaims (getIdTokenClaimsOptions: GetIdTokenClaimsOptions): Promise<IdToken> | undefined {\r\n    return this.auth0Client?.getIdTokenClaims(getIdTokenClaimsOptions)\r\n  }\r\n\r\n  getTokenSilently (getTokenSilentlyOptions: GetTokenSilentlyOptions): Promise<any> | undefined {\r\n    return this.auth0Client?.getTokenSilently(getTokenSilentlyOptions)\r\n  }\r\n\r\n  getTokenWithPopup (getTokenWithPopupOptions: GetTokenWithPopupOptions): Promise<string> | undefined {\r\n    return this.auth0Client?.getTokenWithPopup(getTokenWithPopupOptions)\r\n  }\r\n\r\n  logout (logoutOptions: LogoutOptions): void {\r\n    return this.auth0Client?.logout(logoutOptions)\r\n  }\r\n\r\n  // We initialize all that shit with our own method (we cannot pass any parameters to the created() lifecycle hook).\r\n  async init (onRedirectCallback: RedirectCallback,\r\n    redirectUri: string,\r\n    auth0Options: Auth0Options) {\r\n    this.auth0Client = await createAuth0Client({\r\n      domain: auth0Options.domain,\r\n      client_id: auth0Options.clientId,\r\n      audience: auth0Options.audience,\r\n      cacheLocation: auth0Options.cacheLocation,\r\n      redirect_uri: redirectUri\r\n    })\r\n\r\n    try {\r\n      if (window.location.search.includes('error') ||\r\n        (window.location.search.includes('code=')) &&\r\n        window.location.search.includes('state=')) {\r\n        const { appState } = await this.auth0Client?.handleRedirectCallback() ?? { appState: undefined }\r\n\r\n        onRedirectCallback(appState)\r\n      }\r\n    } catch (e) {\r\n      console.error(e)\r\n      this.error = e\r\n    } finally {\r\n      this.isAuthenticated = await this.auth0Client?.isAuthenticated()\r\n      this.user = await this.getUser()\r\n      this.loading = false\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}]}