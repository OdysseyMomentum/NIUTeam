{"remainingRequest":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/babel-loader/lib/index.js!/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/ts-loader/index.js??ref--13-2!/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erfalk/ws_filedgr/filedgr-streams-front/src/components/Details.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/src/components/Details.vue","mtime":1605015596323},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9lcmZhbGsvd3NfZmlsZWRnci9maWxlZGdyLXN0cmVhbXMtZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy9lcmZhbGsvd3NfZmlsZWRnci9maWxlZGdyLXN0cmVhbXMtZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvZXJmYWxrL3dzX2ZpbGVkZ3IvZmlsZWRnci1zdHJlYW1zLWZyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL1VzZXJzL2VyZmFsay93c19maWxlZGdyL2ZpbGVkZ3Itc3RyZWFtcy1mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy9lcmZhbGsvd3NfZmlsZWRnci9maWxlZGdyLXN0cmVhbXMtZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjsKaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKaW1wb3J0ICdsZWFmbGV0L2Rpc3QvbGVhZmxldC5jc3MnOwppbXBvcnQgTWFwIGZyb20gJ0AvY29tcG9uZW50cy9NYXAudnVlJzsKaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJzsKCnZhciBEZXRhaWxzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfVnVlKSB7CiAgX2luaGVyaXRzKERldGFpbHMsIF9WdWUpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKERldGFpbHMpOwoKICBmdW5jdGlvbiBEZXRhaWxzKCkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEZXRhaWxzKTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpOwogICAgX3RoaXMub2JqZWN0UmVzb3VyY2VzID0gX3RoaXMuJHN0b3JlLnN0YXRlLnJlc291cmNlczsKICAgIF90aGlzLm9iamVjdCA9IF90aGlzLiRzdG9yZS5zdGF0ZS5vYmplY3Q7CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoRGV0YWlscywgW3sKICAgIGtleTogInN0YXJ0RG93bmxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zdGFydERvd25sb2FkID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihyZXNvdXJjZUlkKSB7CiAgICAgICAgdmFyIGFjY2Vzc1Rva2VuOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRG93bmxvYWRpbmc6ICcgKyByZXNvdXJjZUlkKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRhdXRoLmdldFRva2VuU2lsZW50bHkoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgYWNjZXNzVG9rZW4gPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGZldGNoKGVuY29kZVVSSSgnL2FwaS9yZXNvdXJjZS9nZXQnKSwgewogICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIGFjY2Vzc1Rva2VuCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICBvYmplY3Q6IHsKICAgICAgICAgICAgICAgICAgICAgIHVvaTogdGhpcy5vYmplY3QudW9pCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNvdXJjZTogewogICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VJZDogcmVzb3VyY2VJZAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc291cmNlLCByZXNvdXJjZU1ldGE7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZU1ldGEgPSByZXNvdXJjZS5tZXRhOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNvdXJjZU1ldGEuYWNjZXNzICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc291cmNlTWV0YS5maWxldHlwZSA9PT0gJy5qcGcnIHx8IHJlc291cmNlTWV0YS5maWxldHlwZSA9PT0gJy5qcGVnJyB8fCByZXNvdXJjZU1ldGEuZmlsZXR5cGUgPT09ICcucG5nJyB8fCByZXNvdXJjZU1ldGEuZmlsZXR5cGUgPT09ICcucGRmJyB8fCByZXNvdXJjZU1ldGEuZmlsZXR5cGUgPT09ICcuc3ZnJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKHJlc291cmNlTWV0YS5hY2Nlc3MsICdfYmxhbmsnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihyZXNvdXJjZU1ldGEuYWNjZXNzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSgpKS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGhlcmUgd2FzIGFuIGVycm9yIScsIGVycm9yKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzdGFydERvd25sb2FkKF94KSB7CiAgICAgICAgcmV0dXJuIF9zdGFydERvd25sb2FkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzdGFydERvd25sb2FkOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZ2V0RG9jdW1lbnRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREb2N1bWVudHMoKSB7CiAgICAgIHJldHVybiB0aGlzLm9iamVjdFJlc291cmNlcy5maWx0ZXIoZnVuY3Rpb24gKHIpIHsKICAgICAgICByZXR1cm4gci5yZXNvdXJjZVR5cGUgPT09ICdET0NVTUVOVCcgJiYgci5tZXRhICE9IG51bGw7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFNlbnNvcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNlbnNvcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLm9iamVjdFJlc291cmNlcy5maWx0ZXIoZnVuY3Rpb24gKHIpIHsKICAgICAgICByZXR1cm4gci5yZXNvdXJjZVR5cGUgPT09ICdTRU5TT1InOwogICAgICB9KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBEZXRhaWxzOwp9KFZ1ZSk7CgpEZXRhaWxzID0gX19kZWNvcmF0ZShbQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBNYXA6IE1hcAogIH0KfSldLCBEZXRhaWxzKTsKZXhwb3J0IGRlZmF1bHQgRGV0YWlsczs="},{"version":3,"sources":["/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erfalk/ws_filedgr/filedgr-streams-front/src/components/Details.vue?vue&type=script&lang=ts&"],"names":[],"mappings":";;;;;;;;;AAiFA,OAAO,0BAAP;AACA,OAAO,GAAP,MAAgB,sBAAhB;AACA,SAAQ,SAAR,EAAmB,GAAnB,QAA6B,wBAA7B;;AAUA,IAAqB,OAArB;AAAA;;AAAA;;AAIE,qBAAA;AAAA;;AAAA;;AACE;AACA,UAAK,eAAL,GAAuB,MAAK,MAAL,CAAY,KAAZ,CAAkB,SAAzC;AACA,UAAK,MAAL,GAAc,MAAK,MAAL,CAAY,KAAZ,CAAkB,MAAhC;AAHF;AAIC;;AARH;AAAA;AAAA;AAAA,qGAU8B,UAV9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAWI,gBAAA,OAAO,CAAC,GAAR,CAAY,kBAAkB,UAA9B;AAXJ;AAAA,uBAY8B,KAAK,KAAL,CAAW,gBAAX,EAZ9B;;AAAA;AAYU,gBAAA,WAZV;AAaI,gBAAA,KAAK,CAAC,SAAS,CAAC,mBAAD,CAAV,EAAiC;AACpC,kBAAA,MAAM,EAAE,MAD4B;AAEpC,kBAAA,OAAO,EAAE;AACP,oBAAA,aAAa,EAAE,YAAY;AADpB,mBAF2B;AAKpC,kBAAA,IAAI,EAAE,IAAI,CAAC,SAAL,CAAe;AACnB,oBAAA,MAAM,EAAE;AACN,sBAAA,GAAG,EAAE,KAAK,MAAL,CAAY;AADX,qBADW;AAInB,oBAAA,QAAQ,EAAE;AACR,sBAAA,UAAU,EAAE;AADJ;AAJS,mBAAf;AAL8B,iBAAjC,CAAL,CAcG,IAdH;AAAA,qFAcQ,iBAAM,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCACgC,QAAQ,CAAC,IAAT,EADhC;;AAAA;AACA,4BAAA,QADA;AAEA,4BAAA,YAFA,GAEe,QAAQ,CAAC,IAFxB;;AAIN,gCAAI,YAAY,CAAC,MAAb,KAAwB,SAA5B,EAAuC;AACrC,kCAAI,YAAY,CAAC,QAAb,KAA0B,MAA1B,IACF,YAAY,CAAC,QAAb,KAA0B,OADxB,IAEF,YAAY,CAAC,QAAb,KAA0B,MAFxB,IAGF,YAAY,CAAC,QAAb,KAA0B,MAHxB,IAIF,YAAY,CAAC,QAAb,KAA0B,MAJ5B,EAIoC;AAClC,gCAAA,MAAM,CAAC,IAAP,CAAY,YAAY,CAAC,MAAzB,EAAiC,QAAjC;AACD,+BAND,MAMO;AACL,gCAAA,MAAM,CAAC,IAAP,CAAY,YAAY,CAAC,MAAzB;AACD;AACF;;AAdK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAdR;;AAAA;AAAA;AAAA;AAAA,qBA8BG,KA9BH,CA8BS,UAAA,KAAK,EAAG;AACb,kBAAA,OAAO,CAAC,KAAR,CAAc,qBAAd,EAAqC,KAArC;AACD,iBAhCH;;AAbJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,mCAgDsB;AAClB,aAAO,KAAK,eAAL,CAAqB,MAArB,CAA4B,UAAA,CAAC;AAAA,eAAK,CAAC,CAAC,YAAF,KAAmB,UAAnB,IAAiC,CAAC,CAAC,IAAF,IAAU,IAAhD;AAAA,OAA7B,CAAP;AACD;AAlDH;AAAA;AAAA,iCAoDoB;AAChB,aAAO,KAAK,eAAL,CAAqB,MAArB,CAA4B,UAAA,CAAC;AAAA,eAAK,CAAC,CAAC,YAAF,KAAmB,QAAxB;AAAA,OAA7B,CAAP;AACD;AAtDH;;AAAA;AAAA,EAAqC,GAArC,CAAA;;AAAqB,OAAO,GAAA,UAAA,CAAA,CAL3B,SAAS,CAAC;AACT,EAAA,UAAU,EAAE;AACV,IAAA,GAAG,EAAH;AADU;AADH,CAAD,CAKkB,CAAA,EAAP,OAAO,CAAP;eAAA,O","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'leaflet/dist/leaflet.css'\nimport Map from '@/components/Map.vue'\nimport {Component, Vue} from 'vue-property-decorator'\nimport {IDocumentMeta, IResourceType} from '@/types/ResourceType'\nimport {IObjectType} from '@/types/ObjectType'\nimport {IUserType} from '@/types/UserType'\n\n@Component({\n  components: {\n    Map\n  }\n})\nexport default class Details extends Vue {\n  private objectResources: IResourceType[]\n  private object: IObjectType\n\n  constructor() {\n    super()\n    this.objectResources = this.$store.state.resources\n    this.object = this.$store.state.object\n  }\n\n  private async startDownload(resourceId: string) {\n    console.log('Downloading: ' + resourceId)\n    const accessToken = await this.$auth.getTokenSilently()\n    fetch(encodeURI('/api/resource/get'), {\n      method: 'POST',\n      headers: {\n        Authorization: 'Bearer ' + accessToken\n      },\n      body: JSON.stringify({\n        object: {\n          uoi: this.object.uoi\n        },\n        resource: {\n          resourceId: resourceId\n        }\n\n      })\n    }).then(async response => {\n      const resource: IResourceType = await response.json() as IResourceType\n      const resourceMeta = resource.meta as IDocumentMeta\n\n      if (resourceMeta.access !== undefined) {\n        if (resourceMeta.filetype === '.jpg' ||\n          resourceMeta.filetype === '.jpeg' ||\n          resourceMeta.filetype === '.png' ||\n          resourceMeta.filetype === '.pdf' ||\n          resourceMeta.filetype === '.svg') {\n          window.open(resourceMeta.access, '_blank')\n        } else {\n          window.open(resourceMeta.access)\n        }\n      }\n    })\n      .catch(error => {\n        console.error('There was an error!', error)\n      })\n  }\n\n  private getDocuments(): IResourceType[] {\n    return this.objectResources.filter(r => (r.resourceType === 'DOCUMENT' && r.meta != null))\n  }\n\n  private getSensors(): IResourceType[] {\n    return this.objectResources.filter(r => (r.resourceType === 'SENSOR'))\n  }\n}\n"],"sourceRoot":""}]}