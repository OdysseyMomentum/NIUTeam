{"remainingRequest":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erfalk/ws_filedgr/filedgr-streams-front/src/views/Profile.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/src/views/Profile.vue","mtime":1604413767091},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgeyBWdWUgfSBmcm9tICJ2dWUtcHJvcGVydHktZGVjb3JhdG9yIjsKaW1wb3J0IHN0b3JlIGZyb20gIi4uL3N0b3JlIjsKaW1wb3J0IGRhdGVGb3JtYXQgZnJvbSAnZGF0ZWZvcm1hdCcKCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2ZpbGUgZXh0ZW5kcyBWdWUgewoKICBnZXQgZm5hbWUoKSB7CiAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZm5hbWU7CiAgfQogIHNldCBmbmFtZSh2YWx1ZSkgewogICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVGbmFtZScsIHZhbHVlKTsKICB9CgogIGdldCBsbmFtZSgpIHsKICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5sbmFtZTsKICB9CiAgc2V0IGxuYW1lKHZhbHVlKSB7CiAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VwZGF0ZUxuYW1lJywgdmFsdWUpOwogIH0KCiAgZ2V0IGVtYWlsKCkgewogICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmVtYWlsOwogIH0KICBzZXQgZW1haWwodmFsdWUpIHsKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlRW1haWwnLCB2YWx1ZSk7CiAgfQoKICBnZXQgYmRheSgpIHsKICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5iZGF5OwogIH0KICBzZXQgYmRheSh2YWx1ZSkgewogICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVCZGF5JywgdmFsdWUpOwogIH0KCiAgZ2V0IHN0cmVldCgpIHsKICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5zdHJlZXQ7CiAgfQogIHNldCBzdHJlZXQodmFsdWUpIHsKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlU3RyZWV0JywgdmFsdWUpOwogIH0KCiAgZ2V0IHNudW1iZXIoKSB7CiAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc251bWJlcjsKICB9CiAgc2V0IHNudW1iZXIodmFsdWUpIHsKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlU251bWJlcicsIHZhbHVlKTsKICB9CgogIGdldCBwb3N0YWxfY29kZSgpIHsKICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wb3N0YWxfY29kZTsKICB9CiAgc2V0IHBvc3RhbF9jb2RlKHZhbHVlKSB7CiAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VwZGF0ZVBvc3RhbF9jb2RlJywgdmFsdWUpOwogIH0KCiAgZ2V0IGNpdHkoKSB7CiAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuY2l0eTsKICB9CiAgc2V0IGNpdHkodmFsdWUpIHsKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlQ2l0eScsIHZhbHVlKTsKICB9CgogIGdldCBjb3VudHJ5KCkgewogICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmNvdW50cnk7CiAgfQogIHNldCBjb3VudHJ5KHZhbHVlKSB7CiAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VwZGF0ZUNvdW50cnknLCB2YWx1ZSk7CiAgfQogIAogIGFzeW5jIGdldFVzZXIoKSB7CiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHRoaXMuJGF1dGguZ2V0VG9rZW5TaWxlbnRseSgpOwogICAgY29uc29sZS5sb2coYWNjZXNzVG9rZW4pOwogICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZmV0Y2goZW5jb2RlVVJJKCIvYXBpL3VzZXIvZ2V0IiksIHsKICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyBhY2Nlc3NUb2tlbiwKICAgICAgfQogICAgfSk7CiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzdWx0Lmpzb24oKTsKICAgIHRoaXMuZm5hbWUgPSBkYXRhLmZpcnN0bmFtZQogICAgdGhpcy5sbmFtZSA9IGRhdGEubGFzdG5hbWUKICAgIHRoaXMuZW1haWwgPSBkYXRhLmVtYWlsCiAgICB0aGlzLmJkYXkgPSBkYXRlRm9ybWF0KG5ldyBEYXRlKGRhdGEuYmlydGhkYXRlKjEwMDApLCd5eXl5LW1tLWRkJykKICAgIHRoaXMuc3RyZWV0ID0gZGF0YS5zdHJlZXROYW1lCiAgICB0aGlzLnNudW1iZXIgPSBkYXRhLnN0cmVldE51bWJlcgogICAgdGhpcy5wb3N0YWxfY29kZSA9IGRhdGEuemlwY29kZQogICAgdGhpcy5jaXR5ID0gZGF0YS5jaXR5CiAgICB0aGlzLmNvdW50cnkgPSBkYXRhLmNvdW50cnkKICB9CiAgICBhc3luYyBwdXRVc2VyKCkgewogICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCB0aGlzLiRhdXRoLmdldFRva2VuU2lsZW50bHkoKTsKICAgIGNvbnNvbGUubG9nKGFjY2Vzc1Rva2VuKTsKICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZldGNoKGVuY29kZVVSSSgiL2FwaS91c2VyL3VwZGF0ZSIpLCB7CiAgICAgIG1ldGhvZDogIlBVVCIsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyBhY2Nlc3NUb2tlbiwKICAgICAgfSwKICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB1c2VySWQ6IHRoaXMuJGF1dGgudXNlci5zdWIsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRhdXRoLnVzZXIuZW1haWwsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0bmFtZTogdGhpcy5mbmFtZSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdG5hbWU6IHRoaXMubG5hbWUsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpcnRoZGF0ZTogcGFyc2VJbnQoKG5ldyBEYXRlKHRoaXMuYmRheSkuZ2V0VGltZSgpIC8gMTAwMCkudG9GaXhlZCgwKSksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVldE5hbWU6IHRoaXMuc3RyZWV0LCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlZXROdW1iZXI6IHRoaXMuc251bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6aXBjb2RlOiB0aGlzLnBvc3RhbF9jb2RlLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXR5OiB0aGlzLmNpdHksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cnk6IHRoaXMuY291bnRyeSB9KQogICAgfSk7CiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzdWx0Lmpzb24oKTsKICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgCiAgfQp9Cg=="},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Profile.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <section>\n    <div class=\"tile is-ancestor\">\n      <div class=\"tile is-4 is-vertical is-parent\">\n        <div class=\"tile is-child box has-text-left\">\n          <div class=\"media\">\n            <figure class=\"image is-32x32\">\n              <img src=\"../assets/user.svg\" />\n            </figure>\n            <p class=\"title is-size-5 mt-2 ml-2\">Personal Details</p>\n          </div>\n          <fieldset>\n            <div class=\"columns is-mobile is-multiline\">\n              <div class=\"column is-half pt-0 mt-4\">\n                <label>First Name</label\n                ><input\n                  class=\"input\"\n                  placeholder=\"First Name...\"\n                  v-model=\"fname\"\n                />\n              </div>\n              <div class=\"column is-half pt-0 mt-4\">\n                <label>Last Name</label\n                ><input\n                  name=\"lname\"\n                  class=\"input\"\n                  placeholder=\"Last Name...\"\n                  v-model=\"lname\"\n                />\n              </div>\n              <div class=\"column is-full pt-0\">\n                <label>Email</label\n                ><input\n                  name=\"email\"\n                  type=\"email\"\n                  class=\"input\"\n                  placeholder=\"Email Address...\"\n                  v-model=\"email\"\n                  disabled\n                />\n              </div>\n              <div class=\"column is-full pt-0\"><label>Birthday</label><input name=\"bday\" type=\"date\" class=\"input\" placeholder=\"Click to select...\" v-model=\"bday\"></div>\n              <div class=\"column is-three-quarters pt-0\">\n                <label>Street Name</label\n                ><input\n                  name=\"street\"\n                  class=\"input\"\n                  placeholder=\"Street Name...\"\n                  v-model=\"street\"\n                />\n              </div>\n              <div class=\"column is-one-quarters pt-0\">\n                <label>Number</label\n                ><input\n                  name=\"snumber\"\n                  class=\"input\"\n                  placeholder=\"Number...\"\n                  v-model=\"snumber\"\n                />\n              </div>\n              <div class=\"column is-three-quarters pt-0 pt-0\">\n                <label>City</label\n                ><input\n                  name=\"city\"\n                  class=\"input\"\n                  placeholder=\"City...\"\n                  v-model=\"city\"\n                />\n              </div>\n              <div class=\"column is-one-quarters pt-0\">\n                <label>Zipcode</label\n                ><input\n                  name=\"postal_code\"\n                  class=\"input\"\n                  placeholder=\"Zipcode...\"\n                  v-model=\"postal_code\"\n                />\n              </div>\n              <div class=\"column is-full pt-0\">\n                <label>Country</label\n                ><input\n                  name=\"country\"\n                  class=\"input\"\n                  placeholder=\"Country...\"\n                  v-model=\"country\"\n                />\n              </div>\n            </div>\n          </fieldset>\n          <b-button @click=\"putUser()\" type=\"is-success is-pulled-right mt-4\"\n            >Update</b-button>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script lang=\"ts\">\nimport { Vue } from \"vue-property-decorator\";\nimport store from \"../store\";\nimport dateFormat from 'dateformat'\n\nexport default class Profile extends Vue {\n\n  get fname() {\n    return this.$store.state.fname;\n  }\n  set fname(value) {\n    this.$store.commit('updateFname', value);\n  }\n\n  get lname() {\n    return this.$store.state.lname;\n  }\n  set lname(value) {\n    this.$store.commit('updateLname', value);\n  }\n\n  get email() {\n    return this.$store.state.email;\n  }\n  set email(value) {\n    this.$store.commit('updateEmail', value);\n  }\n\n  get bday() {\n    return this.$store.state.bday;\n  }\n  set bday(value) {\n    this.$store.commit('updateBday', value);\n  }\n\n  get street() {\n    return this.$store.state.street;\n  }\n  set street(value) {\n    this.$store.commit('updateStreet', value);\n  }\n\n  get snumber() {\n    return this.$store.state.snumber;\n  }\n  set snumber(value) {\n    this.$store.commit('updateSnumber', value);\n  }\n\n  get postal_code() {\n    return this.$store.state.postal_code;\n  }\n  set postal_code(value) {\n    this.$store.commit('updatePostal_code', value);\n  }\n\n  get city() {\n    return this.$store.state.city;\n  }\n  set city(value) {\n    this.$store.commit('updateCity', value);\n  }\n\n  get country() {\n    return this.$store.state.country;\n  }\n  set country(value) {\n    this.$store.commit('updateCountry', value);\n  }\n  \n  async getUser() {\n    const accessToken = await this.$auth.getTokenSilently();\n    console.log(accessToken);\n    const result = await fetch(encodeURI(\"/api/user/get\"), {\n      method: \"POST\",\n      headers: {\n        Authorization: \"Bearer \" + accessToken,\n      }\n    });\n    const data = await result.json();\n    this.fname = data.firstname\n    this.lname = data.lastname\n    this.email = data.email\n    this.bday = dateFormat(new Date(data.birthdate*1000),'yyyy-mm-dd')\n    this.street = data.streetName\n    this.snumber = data.streetNumber\n    this.postal_code = data.zipcode\n    this.city = data.city\n    this.country = data.country\n  }\n    async putUser() {\n    const accessToken = await this.$auth.getTokenSilently();\n    console.log(accessToken);\n    const result = await fetch(encodeURI(\"/api/user/update\"), {\n      method: \"PUT\",\n      headers: {\n        Authorization: \"Bearer \" + accessToken,\n      },\n      body: JSON.stringify({ userId: this.$auth.user.sub, \n                             email: this.$auth.user.email, \n                             firstname: this.fname, \n                             lastname: this.lname, \n                             birthdate: parseInt((new Date(this.bday).getTime() / 1000).toFixed(0)), \n                             streetName: this.street, \n                             streetNumber: this.snumber,\n                             zipcode: this.postal_code, \n                             city: this.city, \n                             country: this.country })\n    });\n    const data = await result.json();\n    console.log(data);\n    \n  }\n}\n</script>\n"]}]}