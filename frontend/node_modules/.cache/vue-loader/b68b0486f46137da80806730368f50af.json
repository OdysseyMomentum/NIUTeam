{"remainingRequest":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erfalk/ws_filedgr/filedgr-streams-front/src/views/Profile.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/src/views/Profile.vue","mtime":1604953541427},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHsgVnVlIH0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7CmltcG9ydCBzdG9yZSBmcm9tICIuLi9zdG9yZSI7CmltcG9ydCBkYXRlRm9ybWF0IGZyb20gImRhdGVmb3JtYXQiOwppbXBvcnQgeyBJVXNlclR5cGUgfSBmcm9tICJAL3R5cGVzL1VzZXJUeXBlIjsKCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2ZpbGUgZXh0ZW5kcyBWdWUgewoKICBwcml2YXRlIGNVc2VyOiBJVXNlclR5cGUgPSBudWxsCgogICAgY29uc3RydWN0b3IgKCkgewogICAgICBzdXBlcigpCiAgICAgIHRoaXMuY1VzZXIgPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyCiAgfQoKICBwcml2YXRlIGZpcnN0bmFtZSA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuZmlyc3RuYW1lCiAgcHJpdmF0ZSBsYXN0bmFtZSA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIubGFzdG5hbWUKICBwcml2YXRlIGVtYWlsID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5lbWFpbAogIHByaXZhdGUgYmlydGhkYXRlID0gZGF0ZUZvcm1hdChuZXcgRGF0ZSh0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmJpcnRoZGF0ZSoxMDAwKSwneXl5eS1tbS1kZCcpCiAgcHJpdmF0ZSBzdHJlZXROYW1lID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5zdHJlZXROYW1lCiAgcHJpdmF0ZSBzdHJlZXROdW1iZXIgPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnN0cmVldE51bWJlcgogIHByaXZhdGUgemlwY29kZSA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuemlwY29kZQogIHByaXZhdGUgY2l0eSA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY2l0eQogIHByaXZhdGUgY291bnRyeSA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY291bnRyeQoKICBhc3luYyBwdXRVc2VyKCkgewogIGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgdGhpcy4kYXV0aC5nZXRUb2tlblNpbGVudGx5KCk7CiAgY29uc29sZS5sb2coYWNjZXNzVG9rZW4pOwogIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZldGNoKGVuY29kZVVSSSgiL2FwaS91c2VyL3VwZGF0ZSIpLCB7CiAgICBtZXRob2Q6ICJQVVQiLAogICAgaGVhZGVyczogewogICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyBhY2Nlc3NUb2tlbiwKICAgIH0sCiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHVzZXJJZDogdGhpcy4kYXV0aC51c2VyLnN1YiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRhdXRoLnVzZXIuZW1haWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdG5hbWU6IHRoaXMuY1VzZXIuZmlyc3RuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdG5hbWU6IHRoaXMuY1VzZXIubGFzdG5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXJ0aGRhdGU6IHBhcnNlSW50KChuZXcgRGF0ZSh0aGlzLmNVc2VyLmJpcnRoZGF0ZSkuZ2V0VGltZSgpIC8gMTAwMCkudG9GaXhlZCgwKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlZXROYW1lOiB0aGlzLmNVc2VyLnN0cmVldE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlZXROdW1iZXI6IHRoaXMuY1VzZXIuc3RyZWV0TnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgemlwY29kZTogdGhpcy5jVXNlci56aXBjb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0eTogdGhpcy5jVXNlci5jaXR5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRyeTogdGhpcy5jVXNlci5jb3VudHJ5IH0pCiAgfSk7CiAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3VsdC5qc29uKCk7CiAgY29uc29sZS5sb2coZGF0YSk7Cgp9Cn0K"},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Profile.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <section>\n    <div class=\"tile is-ancestor\">\n      <div class=\"tile is-4 is-vertical is-parent\">\n        <div class=\"tile is-child box has-text-left\">\n          <div class=\"media\">\n            <figure class=\"image is-32x32\">\n              <img src=\"../assets/user.svg\" />\n            </figure>\n            <p class=\"title is-size-5 mt-2 ml-2\">Personal Details</p>\n          </div>\n          <fieldset>\n            <div class=\"columns is-mobile is-multiline\">\n              <div class=\"column is-half pt-0 mt-4\">\n                <label>First Name</label\n                ><input\n                  class=\"input\"\n                  placeholder=\"First Name...\"\n                  v-model=\"cUser.firstname\"\n                />\n              </div>\n              <div class=\"column is-half pt-0 mt-4\">\n                <label>Last Name</label\n                ><input\n                  name=\"lname\"\n                  class=\"input\"\n                  placeholder=\"Last Name...\"\n                  v-model=\"cUser.lastname\"\n                />\n              </div>\n              <div class=\"column is-full pt-0\">\n                <label>Email</label\n                ><input\n                  name=\"email\"\n                  type=\"email\"\n                  class=\"input\"\n                  placeholder=\"Email Address...\"\n                  v-model=\"cUser.email\"\n                  disabled\n                />\n              </div>\n              <div class=\"column is-full pt-0\">\n                <label>Birthday</label\n                ><input\n                  name=\"bday\"\n                  type=\"date\"\n                  class=\"input\"\n                  placeholder=\"Click to select...\"\n                  v-model=\"cUser.birthdate\"\n                />\n              </div>\n              <div class=\"column is-three-quarters pt-0\">\n                <label>Street Name</label\n                ><input\n                  name=\"street\"\n                  class=\"input\"\n                  placeholder=\"Street Name...\"\n                  v-model=\"cUser.streetName\"\n                />\n              </div>\n              <div class=\"column is-one-quarters pt-0\">\n                <label>Number</label\n                ><input\n                  name=\"snumber\"\n                  class=\"input\"\n                  placeholder=\"Number...\"\n                  v-model=\"cUser.streetNumber\"\n                />\n              </div>\n              <div class=\"column is-three-quarters pt-0 pt-0\">\n                <label>City</label\n                ><input\n                  name=\"city\"\n                  class=\"input\"\n                  placeholder=\"City...\"\n                  v-model=\"cUser.city\"\n                />\n              </div>\n              <div class=\"column is-one-quarters pt-0\">\n                <label>Zipcode</label\n                ><input\n                  name=\"postal_code\"\n                  class=\"input\"\n                  placeholder=\"Zipcode...\"\n                  v-model=\"cUser.zipcode\"\n                />\n              </div>\n              <div class=\"column is-full pt-0\">\n                <label>Country</label\n                ><input\n                  name=\"country\"\n                  class=\"input\"\n                  placeholder=\"Country...\"\n                  v-model=\"cUser.country\"\n                />\n              </div>\n            </div>\n          </fieldset>\n          <b-button @click=\"putUser()\" type=\"is-success is-pulled-right mt-4\"\n            >Update</b-button\n          >\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script lang=\"ts\">\nimport { Vue } from \"vue-property-decorator\";\nimport store from \"../store\";\nimport dateFormat from \"dateformat\";\nimport { IUserType } from \"@/types/UserType\";\n\nexport default class Profile extends Vue {\n\n  private cUser: IUserType = null\n\n    constructor () {\n      super()\n      this.cUser = this.$store.state.user\n  }\n\n  private firstname = this.$store.state.user.firstname\n  private lastname = this.$store.state.user.lastname\n  private email = this.$store.state.user.email\n  private birthdate = dateFormat(new Date(this.$store.state.user.birthdate*1000),'yyyy-mm-dd')\n  private streetName = this.$store.state.user.streetName\n  private streetNumber = this.$store.state.user.streetNumber\n  private zipcode = this.$store.state.user.zipcode\n  private city = this.$store.state.user.city\n  private country = this.$store.state.user.country\n\n  async putUser() {\n  const accessToken = await this.$auth.getTokenSilently();\n  console.log(accessToken);\n  const result = await fetch(encodeURI(\"/api/user/update\"), {\n    method: \"PUT\",\n    headers: {\n      Authorization: \"Bearer \" + accessToken,\n    },\n    body: JSON.stringify({ userId: this.$auth.user.sub,\n                            email: this.$auth.user.email,\n                            firstname: this.cUser.firstname,\n                            lastname: this.cUser.lastname,\n                            birthdate: parseInt((new Date(this.cUser.birthdate).getTime() / 1000).toFixed(0)),\n                            streetName: this.cUser.streetName,\n                            streetNumber: this.cUser.streetNumber,\n                            zipcode: this.cUser.zipcode,\n                            city: this.cUser.city,\n                            country: this.cUser.country })\n  });\n  const data = await result.json();\n  console.log(data);\n\n}\n}\n</script>\n"]}]}