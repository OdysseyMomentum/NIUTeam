{"remainingRequest":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erfalk/ws_filedgr/filedgr-streams-front/src/views/Objects.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/src/views/Objects.vue","mtime":1605396246744},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0ICdsZWFmbGV0L2Rpc3QvbGVhZmxldC5jc3MnCmltcG9ydCBEZXRhaWxzIGZyb20gJ0AvY29tcG9uZW50cy9EZXRhaWxzLnZ1ZScKaW1wb3J0IE1vZGFsRm9ybSBmcm9tICdAL2NvbXBvbmVudHMvQWRkT2JqZWN0TW9kYWxGb3JtLmpzJwppbXBvcnQgeyBDb21wb25lbnQsIFZ1ZSB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InCmltcG9ydCB7IElSZXNvdXJjZVR5cGUgfSBmcm9tICdAL3R5cGVzL1Jlc291cmNlVHlwZScKaW1wb3J0IHsgSU9iamVjdFR5cGUgfSBmcm9tICdAL3R5cGVzL09iamVjdFR5cGUnCmltcG9ydCBBZGRPYmplY3RNb2RhbEZvcm0gZnJvbSAnQC9jb21wb25lbnRzL0FkZE9iamVjdE1vZGFsRm9ybS52dWUnCgpAQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBEZXRhaWxzCiAgfQp9KQpleHBvcnQgZGVmYXVsdCBjbGFzcyBUaGluZ3MgZXh0ZW5kcyBWdWUgewogIHB1YmxpYyByZXJlbmRlcktleSA9IDAKICBwdWJsaWMgc2hvdyA9IGZhbHNlCiAgcHVibGljIGlzTW9kYWxBY3RpdmUgPSBmYWxzZQogIHB1YmxpYyB1b2kgPSBudWxsCiAgcHVibGljIGRpc3BsYXlOYW1lID0gJycKICBwdWJsaWMgZGVzY3JpcHRpb24gPSAnJwogIHB1YmxpYyBnZW9Db29yZGluYXRlcyA9IHsKICAgIGxhdGl0dWRlOiBudWxsLAogICAgbG9uZ2l0dWRlOiBudWxsCiAgfQoKICBwdWJsaWMgc3RyZWV0TmFtZSA9ICcnCiAgcHVibGljIHN0cmVldE51bWJlciA9ICcnCiAgcHVibGljIHppcGNvZGUgPSBudWxsCiAgcHVibGljIGNpdHkgPSAnJwogIHB1YmxpYyBjb3VudHJ5ID0gJycKCiAgcHJpdmF0ZSByZXNvdXJjZTogSVJlc291cmNlVHlwZQoKICBhc3luYyBnZXRPYmplY3QgKHVvaTogc3RyaW5nKSB7CiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHRoaXMuJGF1dGguZ2V0VG9rZW5TaWxlbnRseSgpCiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmZXRjaChlbmNvZGVVUkkoJy9hcGkvb2JqZWN0L2dldCcpLCB7CiAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgYWNjZXNzVG9rZW4KICAgICAgfSwKICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB1b2k6IHVvaSB9KQogICAgfSkKICAgIGNvbnN0IHJlc3BvbnNlOiBJT2JqZWN0VHlwZSA9IGF3YWl0IHJlc3VsdC5qc29uKCkgYXMgSU9iamVjdFR5cGUKICAgIHRoaXMuJHN0b3JlLnN0YXRlLm9iamVjdCA9IHJlc3BvbnNlCgogICAgdGhpcy5zaG93ID0gdHJ1ZQogICAgLy8gZm9yY2UgdXBkYXRlIHRoZSBtYXAKICAgIHRoaXMucmVyZW5kZXJLZXkgKz0gMQogIH0KCiAgYXN5bmMgZ2V0UmVzb3VyY2VzICh1b2k6IHN0cmluZykgewogICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCB0aGlzLiRhdXRoLmdldFRva2VuU2lsZW50bHkoKQogICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZmV0Y2goZW5jb2RlVVJJKCcvYXBpL3Jlc291cmNlL2xpc3QnKSwgewogICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgaGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIGFjY2Vzc1Rva2VuCiAgICAgIH0sCiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdW9pOiB1b2kgfSkKICAgIH0pCiAgICAvLyBjb25zdCByZXNwb25zZTogTXlSZXNvdXJjZVR5cGVbXSA9IGF3YWl0IHJlc3VsdC5qc29uKCkgYXMgTXlSZXNvdXJjZVR5cGVbXQogICAgY29uc3QgcmVzcG9uc2U6IElSZXNvdXJjZVR5cGVbXSA9IGF3YWl0IHJlc3VsdC5qc29uKCkgYXMgSVJlc291cmNlVHlwZVtdCgogICAgdGhpcy4kc3RvcmUuc3RhdGUucmVzb3VyY2VzID0gcmVzcG9uc2UKICB9CgogIG9wZW5Nb2RhbCAoKSB7CiAgICB0aGlzLiRidWVmeS5tb2RhbC5vcGVuKHsKICAgICAgcGFyZW50OiB0aGlzLAogICAgICBjb21wb25lbnQ6IEFkZE9iamVjdE1vZGFsRm9ybSwKICAgICAgaGFzTW9kYWxDYXJkOiB0cnVlLAogICAgICBjdXN0b21DbGFzczogJ2N1c3RvbS1jbGFzcyBjdXN0b20tY2xhc3MtMicsCiAgICAgIHRyYXBGb2N1czogdHJ1ZQogICAgfSkKICB9Cn0K"},{"version":3,"sources":["Objects.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Objects.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"box\">\n      <section>\n        <b-collapse\n          :open=\"false\"\n          style=\"width: 340px\"\n          class=\"card mar-bot\"\n          animation=\"slide\"\n          v-for=\"object in this.$store.state.objects\"\n          :key=\"object.displayName\"\n        >\n          <div\n            slot=\"trigger\"\n            slot-scope=\"props\"\n            class=\"card-header\"\n            role=\"button\"\n            @click=\"getObject(object.uoi), getResources(object.uoi)\"\n          >\n            <p class=\"card-header-title\">\n              {{ object.displayName }}\n            </p>\n            <a class=\"card-header-icon\">\n              <b-icon :icon=\"props.open ? 'menu-down' : 'menu-up'\"> </b-icon>\n            </a>\n          </div>\n          <div\n            slot=\"trigger\"\n            slot-scope=\"props\"\n            class=\"card-header\"\n            role=\"button\"\n            @click=\"getObject(object.uoi), getResources(object.uoi)\"\n          >\n            <p class=\"card-header-title\">\n              {{ object.displayName }}\n            </p>\n            <a class=\"card-header-icon\">\n              <b-icon :icon=\"props.open ? 'menu-down' : 'menu-up'\"> </b-icon>\n            </a>\n          </div>\n          <div class=\"card-content\" @click=\"getObject(object.uoi), getResources(object.uoi)\">\n            <div class=\"content\">\n              UOI: <b-tag class=\"is-pulled-right\"> {{ object.uoi }} </b-tag>\n              <br />\n              {{ $t(\"Description\") }}: {{ object.description }} <br />\n            </div>\n          </div>\n        </b-collapse>\n        <div class=\"footer-button\"><b-button\n          @click=\"openModal()\"\n          style=\"position: absolute; right: 0; bottom: 0\"\n          type=\"is-success is-pulled-right mb-4 mr-4\"\n          >+</b-button\n        ></div>\n      </section>\n    </div>\n    <Details  v-if=\"show\" :key=\"rerenderKey\" />\n  </div>\n</template>\n<script lang=\"ts\">\nimport 'leaflet/dist/leaflet.css'\nimport Details from '@/components/Details.vue'\nimport ModalForm from '@/components/AddObjectModalForm.js'\nimport { Component, Vue } from 'vue-property-decorator'\nimport { IResourceType } from '@/types/ResourceType'\nimport { IObjectType } from '@/types/ObjectType'\nimport AddObjectModalForm from '@/components/AddObjectModalForm.vue'\n\n@Component({\n  components: {\n    Details\n  }\n})\nexport default class Things extends Vue {\n  public rerenderKey = 0\n  public show = false\n  public isModalActive = false\n  public uoi = null\n  public displayName = ''\n  public description = ''\n  public geoCoordinates = {\n    latitude: null,\n    longitude: null\n  }\n\n  public streetName = ''\n  public streetNumber = ''\n  public zipcode = null\n  public city = ''\n  public country = ''\n\n  private resource: IResourceType\n\n  async getObject (uoi: string) {\n    const accessToken = await this.$auth.getTokenSilently()\n    const result = await fetch(encodeURI('/api/object/get'), {\n      method: 'POST',\n      headers: {\n        Authorization: 'Bearer ' + accessToken\n      },\n      body: JSON.stringify({ uoi: uoi })\n    })\n    const response: IObjectType = await result.json() as IObjectType\n    this.$store.state.object = response\n\n    this.show = true\n    // force update the map\n    this.rerenderKey += 1\n  }\n\n  async getResources (uoi: string) {\n    const accessToken = await this.$auth.getTokenSilently()\n    const result = await fetch(encodeURI('/api/resource/list'), {\n      method: 'POST',\n      headers: {\n        Authorization: 'Bearer ' + accessToken\n      },\n      body: JSON.stringify({ uoi: uoi })\n    })\n    // const response: MyResourceType[] = await result.json() as MyResourceType[]\n    const response: IResourceType[] = await result.json() as IResourceType[]\n\n    this.$store.state.resources = response\n  }\n\n  openModal () {\n    this.$buefy.modal.open({\n      parent: this,\n      component: AddObjectModalForm,\n      hasModalCard: true,\n      customClass: 'custom-class custom-class-2',\n      trapFocus: true\n    })\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n.footer-button {\n}\n\n.box {\n  position: relative;\n  width: 390px;\n  padding: auto;\n  margin: 1em;\n  float: left;\n  height: 800px;\n  scrollbar-width: thin;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.info {\n  margin: 1em;\n  float: left;\n  width: 60vw;\n  height: 800px;\n}\n\n.display {\n  display: none;\n}\n\n.center {\n  text-align: center;\n}\n\n.card-content {\n  text-align: left;\n}\n\n.mar-left {\n  margin-left: 5px;\n}\n\n.mar-bot {\n  margin-bottom: 10px;\n}\n</style>\n"]}]}