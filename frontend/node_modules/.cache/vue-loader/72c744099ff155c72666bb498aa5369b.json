{"remainingRequest":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erfalk/ws_filedgr/filedgr-streams-front/src/views/Objects.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/src/views/Objects.vue","mtime":1605342609524},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IEwgZnJvbSAibGVhZmxldCI7CmltcG9ydCAibGVhZmxldC9kaXN0L2xlYWZsZXQuY3NzIjsKaW1wb3J0IERldGFpbHMgZnJvbSAiQC9jb21wb25lbnRzL0RldGFpbHMudnVlIjsKaW1wb3J0IExpbmVDaGFydCBmcm9tICJAL2NvbXBvbmVudHMvcGxvdHMvTGluZUNoYXJ0LnZ1ZSI7CmltcG9ydCBNb2RhbEZvcm0gZnJvbSAiQC9jb21wb25lbnRzL01vZGFsRm9ybS52dWUiOwppbXBvcnQgeyBDb21wb25lbnQsIFByb3AsIFZ1ZSB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOwoKQENvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgRGV0YWlscywKICB9LAp9KQpleHBvcnQgZGVmYXVsdCBjbGFzcyBUaGluZ3MgZXh0ZW5kcyBWdWUgewogIHB1YmxpYyByZXJlbmRlcktleSA9IDAKICBwdWJsaWMgc2hvdyA9IGZhbHNlCiAgcHVibGljIGlzTW9kYWxBY3RpdmUgPSBmYWxzZQogIHB1YmxpYyB1b2kgPSBudWxsCiAgcHVibGljIGRpc3BsYXlOYW1lID0gIiIKICBwdWJsaWMgZGVzY3JpcHRpb24gPSAiIgogIHB1YmxpYyBnZW9Db29yZGluYXRlcyA9IHsKICAgIGxhdGl0dWRlOiBudWxsLAogICAgbG9uZ2l0dWRlOiBudWxsLAogIH0KICBwdWJsaWMgc3RyZWV0TmFtZSA9ICIiCiAgcHVibGljIHN0cmVldE51bWJlciA9ICIiCiAgcHVibGljIHppcGNvZGUgPSBudWxsCiAgcHVibGljIGNpdHkgPSAiIgogIHB1YmxpYyBjb3VudHJ5ID0gIiIKCiAgYXN5bmMgZ2V0T2JqZWN0KHVvaSkgewogICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCB0aGlzLiRhdXRoLmdldFRva2VuU2lsZW50bHkoKTsKICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZldGNoKGVuY29kZVVSSSgiL2FwaS9vYmplY3QvZ2V0IiksIHsKICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyBhY2Nlc3NUb2tlbiwKICAgICAgfSwKICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB1b2k6IHVvaSB9KSwKICAgIH0pOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3VsdC5qc29uKCk7CiAgICB0aGlzLiRzdG9yZS5zdGF0ZS5vYmplY3QudW9pID0gZGF0YS51b2k7CiAgICB0aGlzLiRzdG9yZS5zdGF0ZS5vYmplY3QuZGlzcGxheU5hbWUgPSBkYXRhLmRpc3BsYXlOYW1lOwogICAgdGhpcy4kc3RvcmUuc3RhdGUub2JqZWN0LmRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbjsKICAgIHRoaXMuJHN0b3JlLnN0YXRlLm9iamVjdC5zdHJlZXROYW1lID0gZGF0YS5zdHJlZXROYW1lOwogICAgdGhpcy4kc3RvcmUuc3RhdGUub2JqZWN0LnN0cmVldE51bWJlciA9IGRhdGEuc3RyZWV0TnVtYmVyOwogICAgdGhpcy4kc3RvcmUuc3RhdGUub2JqZWN0LnppcGNvZGUgPSBkYXRhLnppcGNvZGU7CiAgICB0aGlzLiRzdG9yZS5zdGF0ZS5vYmplY3QuY2l0eSA9IGRhdGEuY2l0eTsKICAgIHRoaXMuJHN0b3JlLnN0YXRlLm9iamVjdC5jb3VudHJ5ID0gZGF0YS5jb3VudHJ5OwogICAgdGhpcy4kc3RvcmUuc3RhdGUub2JqZWN0Lmdlb0Nvb3JkaW5hdGVzLmxhdGl0dWRlID0gZGF0YS5nZW9Db29yZGluYXRlcy5sYXRpdHVkZTsKICAgIHRoaXMuJHN0b3JlLnN0YXRlLm9iamVjdC5nZW9Db29yZGluYXRlcy5sb25naXR1ZGUgPSBkYXRhLmdlb0Nvb3JkaW5hdGVzLmxvbmdpdHVkZTsKICAgIHRoaXMuc2hvdyA9IHRydWUKICAgIC8vZm9yY2UgdXBkYXRlIHRoZSBtYXAgCiAgICB0aGlzLnJlcmVuZGVyS2V5ICs9IDEKICB9CiAgb3Blbk1vZGFsKCkgewogICAgdGhpcy4kYnVlZnkubW9kYWwub3Blbih7CiAgICAgICAgcGFyZW50OiB0aGlzLAogICAgICAgIGNvbXBvbmVudDogTW9kYWxGb3JtLAogICAgICAgIGhhc01vZGFsQ2FyZDogdHJ1ZSwKICAgICAgICBjdXN0b21DbGFzczogJ2N1c3RvbS1jbGFzcyBjdXN0b20tY2xhc3MtMicsCiAgICAgICAgdHJhcEZvY3VzOiB0cnVlCiAgICB9KQogICAgfQoKfQo="},{"version":3,"sources":["Objects.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Objects.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"box\">\n      <section>\n        <b-collapse\n          :open=\"false\"\n          style=\"width: 340px\"\n          class=\"card mar-bot\"\n          animation=\"slide\"\n          v-for=\"data in this.$store.state.objects\"\n          :key=\"data.uoi\"\n        >\n          <div\n            slot=\"trigger\"\n            slot-scope=\"props\"\n            class=\"card-header\"\n            role=\"button\"\n            @click=\"getObject(data.uoi)\"\n          >\n            <p class=\"card-header-title\">\n              {{ data.displayName }}\n            </p>\n            <a class=\"card-header-icon\">\n              <b-icon :icon=\"props.open ? 'menu-down' : 'menu-up'\"> </b-icon>\n            </a>\n          </div>\n          <div\n            slot=\"trigger\"\n            slot-scope=\"props\"\n            class=\"card-header\"\n            role=\"button\"\n            @click=\"getObject(data.uoi)\"\n          >\n            <p class=\"card-header-title\">\n              {{ data.displayName }}\n            </p>\n            <a class=\"card-header-icon\">\n              <b-icon :icon=\"props.open ? 'menu-down' : 'menu-up'\"> </b-icon>\n            </a>\n          </div>\n          <div class=\"card-content\" @click=\"getObject(data.uoi)\">\n            <div class=\"content\">\n              UOI: <b-tag class=\"is-pulled-right\"> {{ data.uoi }} </b-tag>\n              <br />\n              {{ $t(\"Description\") }}: {{ data.description }} <br />\n            </div>\n          </div>\n        </b-collapse>\n        <b-button\n          @click=\"openModal()\"\n          style=\"position: absolute; right: 0; bottom: 0\"\n          type=\"is-success is-pulled-right mb-4 mr-4\"\n          >+</b-button\n        >\n      </section>\n    </div>\n    <Details  v-if=\"show\" :key=\"rerenderKey\" />\n  </div>\n</template>\n<script lang=\"ts\">\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport Details from \"@/components/Details.vue\";\nimport LineChart from \"@/components/plots/LineChart.vue\";\nimport ModalForm from \"@/components/ModalForm.vue\";\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\n@Component({\n  components: {\n    Details,\n  },\n})\nexport default class Things extends Vue {\n  public rerenderKey = 0\n  public show = false\n  public isModalActive = false\n  public uoi = null\n  public displayName = \"\"\n  public description = \"\"\n  public geoCoordinates = {\n    latitude: null,\n    longitude: null,\n  }\n  public streetName = \"\"\n  public streetNumber = \"\"\n  public zipcode = null\n  public city = \"\"\n  public country = \"\"\n\n  async getObject(uoi) {\n    const accessToken = await this.$auth.getTokenSilently();\n    const result = await fetch(encodeURI(\"/api/object/get\"), {\n      method: \"POST\",\n      headers: {\n        Authorization: \"Bearer \" + accessToken,\n      },\n      body: JSON.stringify({ uoi: uoi }),\n    });\n    const data = await result.json();\n    this.$store.state.object.uoi = data.uoi;\n    this.$store.state.object.displayName = data.displayName;\n    this.$store.state.object.description = data.description;\n    this.$store.state.object.streetName = data.streetName;\n    this.$store.state.object.streetNumber = data.streetNumber;\n    this.$store.state.object.zipcode = data.zipcode;\n    this.$store.state.object.city = data.city;\n    this.$store.state.object.country = data.country;\n    this.$store.state.object.geoCoordinates.latitude = data.geoCoordinates.latitude;\n    this.$store.state.object.geoCoordinates.longitude = data.geoCoordinates.longitude;\n    this.show = true\n    //force update the map \n    this.rerenderKey += 1\n  }\n  openModal() {\n    this.$buefy.modal.open({\n        parent: this,\n        component: ModalForm,\n        hasModalCard: true,\n        customClass: 'custom-class custom-class-2',\n        trapFocus: true\n    })\n    }\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n#mapid {\n  height: 250px;\n}\n\n.box {\n  position: relative;\n  width: 390px;\n  padding: auto;\n  margin: 1em;\n  float: left;\n  height: 800px;\n  scrollbar-width: thin;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.info {\n  margin: 1em;\n  float: left;\n  width: 840px;\n  height: 800px;\n}\n\n// .highlight {\n//   background: lightyellow;\n//   margin-bottom: 10px !important ;\n// }\n\n.display {\n  display: none;\n}\n\n.center {\n  text-align: center;\n}\n\n.card-content {\n  text-align: left;\n}\n\n.mar-left {\n  margin-left: 5px;\n}\n\n.mar-bot {\n  margin-bottom: 10px;\n}\n</style>\n"]}]}