{"remainingRequest":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erfalk/ws_filedgr/filedgr-streams-front/src/views/Profile.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/src/views/Profile.vue","mtime":1604408313420},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgeyBWdWUgfSBmcm9tICJ2dWUtcHJvcGVydHktZGVjb3JhdG9yIjsKaW1wb3J0IHN0b3JlIGZyb20gIi4uL3N0b3JlIjsKaW1wb3J0IGRhdGVGb3JtYXQgZnJvbSAnZGF0ZWZvcm1hdCcKCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2ZpbGUgZXh0ZW5kcyBWdWUgewoKCm1vdW50ZWQgKCkgewogICAgY29uc29sZS5sb2coIm1vdW50ZWQgUHJvZmlsZSIpOwp9CgogIGdldCBmbmFtZSgpIHsKICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5mbmFtZTsKICB9CiAgc2V0IGZuYW1lKHZhbHVlKSB7CiAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VwZGF0ZUZuYW1lJywgdmFsdWUpOwogIH0KCiAgZ2V0IGxuYW1lKCkgewogICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmxuYW1lOwogIH0KICBzZXQgbG5hbWUodmFsdWUpIHsKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlTG5hbWUnLCB2YWx1ZSk7CiAgfQoKICBnZXQgZW1haWwoKSB7CiAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZW1haWw7CiAgfQogIHNldCBlbWFpbCh2YWx1ZSkgewogICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVFbWFpbCcsIHZhbHVlKTsKICB9CgogIGdldCBiZGF5KCkgewogICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmJkYXk7CiAgfQogIHNldCBiZGF5KHZhbHVlKSB7CiAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VwZGF0ZUJkYXknLCB2YWx1ZSk7CiAgfQoKICBnZXQgc3RyZWV0KCkgewogICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnN0cmVldDsKICB9CiAgc2V0IHN0cmVldCh2YWx1ZSkgewogICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVTdHJlZXQnLCB2YWx1ZSk7CiAgfQoKICBnZXQgc251bWJlcigpIHsKICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5zbnVtYmVyOwogIH0KICBzZXQgc251bWJlcih2YWx1ZSkgewogICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVTbnVtYmVyJywgdmFsdWUpOwogIH0KCiAgZ2V0IHBvc3RhbF9jb2RlKCkgewogICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnBvc3RhbF9jb2RlOwogIH0KICBzZXQgcG9zdGFsX2NvZGUodmFsdWUpIHsKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlUG9zdGFsX2NvZGUnLCB2YWx1ZSk7CiAgfQoKICBnZXQgY2l0eSgpIHsKICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jaXR5OwogIH0KICBzZXQgY2l0eSh2YWx1ZSkgewogICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVDaXR5JywgdmFsdWUpOwogIH0KCiAgZ2V0IGNvdW50cnkoKSB7CiAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuY291bnRyeTsKICB9CiAgc2V0IGNvdW50cnkodmFsdWUpIHsKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlQ291bnRyeScsIHZhbHVlKTsKICB9CiAgCiAgYXN5bmMgZ2V0VXNlcigpIHsKICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgdGhpcy4kYXV0aC5nZXRUb2tlblNpbGVudGx5KCk7CiAgICBjb25zb2xlLmxvZyhhY2Nlc3NUb2tlbik7CiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmZXRjaChlbmNvZGVVUkkoIi9hcGkvdXNlci9nZXQiKSwgewogICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgaGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIGFjY2Vzc1Rva2VuLAogICAgICB9CiAgICB9KTsKICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXN1bHQuanNvbigpOwogICAgdGhpcy5mbmFtZSA9IGRhdGEuZmlyc3RuYW1lCiAgICB0aGlzLmxuYW1lID0gZGF0YS5sYXN0bmFtZQogICAgdGhpcy5lbWFpbCA9IGRhdGEuZW1haWwKICAgIHRoaXMuYmRheSA9IGRhdGVGb3JtYXQobmV3IERhdGUoZGF0YS5iaXJ0aGRhdGUqMTAwMCksJ3l5eXktbW0tZGQnKQogICAgdGhpcy5zdHJlZXQgPSBkYXRhLnN0cmVldE5hbWUKICAgIHRoaXMuc251bWJlciA9IGRhdGEuc3RyZWV0TnVtYmVyCiAgICB0aGlzLnBvc3RhbF9jb2RlID0gZGF0YS56aXBjb2RlCiAgICB0aGlzLmNpdHkgPSBkYXRhLmNpdHkKICAgIHRoaXMuY291bnRyeSA9IGRhdGEuY291bnRyeQogIH0KICAgIGFzeW5jIHB1dFVzZXIoKSB7CiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHRoaXMuJGF1dGguZ2V0VG9rZW5TaWxlbnRseSgpOwogICAgY29uc29sZS5sb2coYWNjZXNzVG9rZW4pOwogICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZmV0Y2goZW5jb2RlVVJJKCIvYXBpL3VzZXIvdXBkYXRlIiksIHsKICAgICAgbWV0aG9kOiAiUFVUIiwKICAgICAgaGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIGFjY2Vzc1Rva2VuLAogICAgICB9LAogICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHVzZXJJZDogdGhpcy4kYXV0aC51c2VyLnN1YiwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJGF1dGgudXNlci5lbWFpbCwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RuYW1lOiB0aGlzLmZuYW1lLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0bmFtZTogdGhpcy5sbmFtZSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmlydGhkYXRlOiBwYXJzZUludCgobmV3IERhdGUodGhpcy5iZGF5KS5nZXRUaW1lKCkgLyAxMDAwKS50b0ZpeGVkKDApKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWV0TmFtZTogdGhpcy5zdHJlZXQsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVldE51bWJlcjogdGhpcy5zbnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHppcGNvZGU6IHRoaXMucG9zdGFsX2NvZGUsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpdHk6IHRoaXMuY2l0eSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRyeTogdGhpcy5jb3VudHJ5IH0pCiAgICB9KTsKICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXN1bHQuanNvbigpOwogICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAKICB9Cn0K"},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Profile.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <section>\n    <div class=\"tile is-ancestor\">\n      <div class=\"tile is-4 is-vertical is-parent\">\n        <div class=\"tile is-child box has-text-left\">\n          <div class=\"media\">\n            <figure class=\"image is-32x32\">\n              <img src=\"../assets/user.svg\" />\n            </figure>\n            <p class=\"title is-size-5 mt-2 ml-2\">Personal Details</p>\n          </div>\n          <fieldset>\n            <div class=\"columns is-mobile is-multiline\">\n              <div class=\"column is-half pt-0 mt-4\">\n                <label>First Name</label\n                ><input\n                  class=\"input\"\n                  placeholder=\"First Name...\"\n                  v-model=\"fname\"\n                />\n              </div>\n              <div class=\"column is-half pt-0 mt-4\">\n                <label>Last Name</label\n                ><input\n                  name=\"lname\"\n                  class=\"input\"\n                  placeholder=\"Last Name...\"\n                  v-model=\"lname\"\n                />\n              </div>\n              <div class=\"column is-full pt-0\">\n                <label>Email</label\n                ><input\n                  name=\"email\"\n                  type=\"email\"\n                  class=\"input\"\n                  placeholder=\"Email Address...\"\n                  v-model=\"email\"\n                  disabled\n                />\n              </div>\n              <div class=\"column is-full pt-0\"><label>Birthday</label><input name=\"bday\" type=\"date\" class=\"input\" placeholder=\"Click to select...\" v-model=\"bday\"></div>\n              <div class=\"column is-three-quarters pt-0\">\n                <label>Street Name</label\n                ><input\n                  name=\"street\"\n                  class=\"input\"\n                  placeholder=\"Street Name...\"\n                  v-model=\"street\"\n                />\n              </div>\n              <div class=\"column is-one-quarters pt-0\">\n                <label>Number</label\n                ><input\n                  name=\"snumber\"\n                  class=\"input\"\n                  placeholder=\"Number...\"\n                  v-model=\"snumber\"\n                />\n              </div>\n              <div class=\"column is-three-quarters pt-0 pt-0\">\n                <label>City</label\n                ><input\n                  name=\"city\"\n                  class=\"input\"\n                  placeholder=\"City...\"\n                  v-model=\"city\"\n                />\n              </div>\n              <div class=\"column is-one-quarters pt-0\">\n                <label>Zipcode</label\n                ><input\n                  name=\"postal_code\"\n                  class=\"input\"\n                  placeholder=\"Zipcode...\"\n                  v-model=\"postal_code\"\n                />\n              </div>\n              <div class=\"column is-full pt-0\">\n                <label>Country</label\n                ><input\n                  name=\"country\"\n                  class=\"input\"\n                  placeholder=\"Country...\"\n                  v-model=\"country\"\n                />\n              </div>\n            </div>\n          </fieldset>\n          <b-button @click=\"putUser()\" type=\"is-success is-pulled-right mt-4\"\n            >PUT</b-button>\n            <b-button @click=\"getUser()\" type=\"is-success is-pulled-left mt-4\"\n            >GET</b-button\n          >\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script lang=\"ts\">\nimport { Vue } from \"vue-property-decorator\";\nimport store from \"../store\";\nimport dateFormat from 'dateformat'\n\nexport default class Profile extends Vue {\n\n\nmounted () {\n    console.log(\"mounted Profile\");\n}\n\n  get fname() {\n    return this.$store.state.fname;\n  }\n  set fname(value) {\n    this.$store.commit('updateFname', value);\n  }\n\n  get lname() {\n    return this.$store.state.lname;\n  }\n  set lname(value) {\n    this.$store.commit('updateLname', value);\n  }\n\n  get email() {\n    return this.$store.state.email;\n  }\n  set email(value) {\n    this.$store.commit('updateEmail', value);\n  }\n\n  get bday() {\n    return this.$store.state.bday;\n  }\n  set bday(value) {\n    this.$store.commit('updateBday', value);\n  }\n\n  get street() {\n    return this.$store.state.street;\n  }\n  set street(value) {\n    this.$store.commit('updateStreet', value);\n  }\n\n  get snumber() {\n    return this.$store.state.snumber;\n  }\n  set snumber(value) {\n    this.$store.commit('updateSnumber', value);\n  }\n\n  get postal_code() {\n    return this.$store.state.postal_code;\n  }\n  set postal_code(value) {\n    this.$store.commit('updatePostal_code', value);\n  }\n\n  get city() {\n    return this.$store.state.city;\n  }\n  set city(value) {\n    this.$store.commit('updateCity', value);\n  }\n\n  get country() {\n    return this.$store.state.country;\n  }\n  set country(value) {\n    this.$store.commit('updateCountry', value);\n  }\n  \n  async getUser() {\n    const accessToken = await this.$auth.getTokenSilently();\n    console.log(accessToken);\n    const result = await fetch(encodeURI(\"/api/user/get\"), {\n      method: \"POST\",\n      headers: {\n        Authorization: \"Bearer \" + accessToken,\n      }\n    });\n    const data = await result.json();\n    this.fname = data.firstname\n    this.lname = data.lastname\n    this.email = data.email\n    this.bday = dateFormat(new Date(data.birthdate*1000),'yyyy-mm-dd')\n    this.street = data.streetName\n    this.snumber = data.streetNumber\n    this.postal_code = data.zipcode\n    this.city = data.city\n    this.country = data.country\n  }\n    async putUser() {\n    const accessToken = await this.$auth.getTokenSilently();\n    console.log(accessToken);\n    const result = await fetch(encodeURI(\"/api/user/update\"), {\n      method: \"PUT\",\n      headers: {\n        Authorization: \"Bearer \" + accessToken,\n      },\n      body: JSON.stringify({ userId: this.$auth.user.sub, \n                             email: this.$auth.user.email, \n                             firstname: this.fname, \n                             lastname: this.lname, \n                             birthdate: parseInt((new Date(this.bday).getTime() / 1000).toFixed(0)), \n                             streetName: this.street, \n                             streetNumber: this.snumber,\n                             zipcode: this.postal_code, \n                             city: this.city, \n                             country: this.country })\n    });\n    const data = await result.json();\n    console.log(data);\n    \n  }\n}\n</script>\n"]}]}