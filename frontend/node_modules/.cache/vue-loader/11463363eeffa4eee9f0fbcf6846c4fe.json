{"remainingRequest":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erfalk/ws_filedgr/filedgr-streams-front/src/views/Profile.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/src/views/Profile.vue","mtime":1605396246744},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicKaW1wb3J0IHsgSVVzZXJUeXBlIH0gZnJvbSAnQC90eXBlcy9Vc2VyVHlwZScKaW1wb3J0IGRhdGVGb3JtYXQgZnJvbSAnZGF0ZWZvcm1hdCcKCkBDb21wb25lbnQKZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZmlsZSBleHRlbmRzIFZ1ZSB7CiAgcHJpdmF0ZSBjVXNlcjogSVVzZXJUeXBlCiAgcHJpdmF0ZSBmb3JtYXRlZEJpcnRoZGF0ZTogc3RyaW5nCgogIGNvbnN0cnVjdG9yICgpIHsKICAgIHN1cGVyKCkKICAgIHRoaXMuY1VzZXIgPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyCiAgICB0aGlzLmZvcm1hdGVkQmlydGhkYXRlID0gZGF0ZUZvcm1hdChuZXcgRGF0ZSh0aGlzLmNVc2VyLmJpcnRoZGF0ZSAqIDEwMDApLCAneXl5eS1tbS1kZCcpCiAgfQoKICBhc3luYyBwdXRVc2VyICgpIHsKICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgdGhpcy4kYXV0aC5nZXRUb2tlblNpbGVudGx5KCkKICAgIGNvbnNvbGUubG9nKGFjY2Vzc1Rva2VuKQogICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZmV0Y2goZW5jb2RlVVJJKCcvYXBpL3VzZXIvdXBkYXRlJyksIHsKICAgICAgbWV0aG9kOiAnUFVUJywKICAgICAgaGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIGFjY2Vzc1Rva2VuCiAgICAgIH0sCiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICB1c2VySWQ6IHRoaXMuJGF1dGgudXNlci5zdWIsCiAgICAgICAgZW1haWw6IHRoaXMuJGF1dGgudXNlci5lbWFpbCwKICAgICAgICBmaXJzdG5hbWU6IHRoaXMuY1VzZXIuZmlyc3RuYW1lLAogICAgICAgIGxhc3RuYW1lOiB0aGlzLmNVc2VyLmxhc3RuYW1lLAogICAgICAgIGJpcnRoZGF0ZTogcGFyc2VJbnQoKG5ldyBEYXRlKHRoaXMuZm9ybWF0ZWRCaXJ0aGRhdGUpLmdldFRpbWUoKSAvIDEwMDApLnRvRml4ZWQoMCkpLAogICAgICAgIHN0cmVldE5hbWU6IHRoaXMuY1VzZXIuc3RyZWV0TmFtZSwKICAgICAgICBzdHJlZXROdW1iZXI6IHRoaXMuY1VzZXIuc3RyZWV0TnVtYmVyLAogICAgICAgIHppcGNvZGU6IHRoaXMuY1VzZXIuemlwY29kZSwKICAgICAgICBjaXR5OiB0aGlzLmNVc2VyLmNpdHksCiAgICAgICAgY291bnRyeTogdGhpcy5jVXNlci5jb3VudHJ5CiAgICAgIH0pCiAgICB9KQogICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3VsdC5qc29uKCkKICAgIGNvbnNvbGUubG9nKGRhdGEpCiAgfQp9Cg=="},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6GA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <section>\n    <div class=\"tile is-ancestor\">\n      <div class=\"tile is-4 is-vertical is-parent\">\n        <div class=\"tile is-child box has-text-left\">\n          <div class=\"media\">\n            <figure class=\"image is-32x32\">\n              <img src=\"../assets/user.svg\"/>\n            </figure>\n            <p class=\"title is-size-5 mt-2 ml-2\">Personal Details</p>\n          </div>\n          <fieldset>\n            <div class=\"columns is-mobile is-multiline\">\n              <div class=\"column is-half pt-0 mt-4\">\n                <label>First Name</label\n                ><input\n                class=\"input\"\n                placeholder=\"First Name...\"\n                v-model=\"cUser.firstname\"\n              />\n              </div>\n              <div class=\"column is-half pt-0 mt-4\">\n                <label>Last Name</label\n                ><input\n                name=\"lname\"\n                class=\"input\"\n                placeholder=\"Last Name...\"\n                v-model=\"cUser.lastname\"\n              />\n              </div>\n              <div class=\"column is-full pt-0\">\n                <label>Email</label\n                ><input\n                name=\"email\"\n                type=\"email\"\n                class=\"input\"\n                placeholder=\"Email Address...\"\n                v-model=\"cUser.email\"\n                disabled\n              />\n              </div>\n              <div class=\"column is-full pt-0\">\n                <label>Birthday</label\n                ><input\n                name=\"bday\"\n                type=\"date\"\n                class=\"input\"\n                placeholder=\"Click to select...\"\n                v-model=\"formatedBirthdate\"\n              />\n              </div>\n              <div class=\"column is-three-quarters pt-0\">\n                <label>Street Name</label\n                ><input\n                name=\"street\"\n                class=\"input\"\n                placeholder=\"Street Name...\"\n                v-model=\"cUser.streetName\"\n              />\n              </div>\n              <div class=\"column is-one-quarters pt-0\">\n                <label>Number</label\n                ><input\n                name=\"snumber\"\n                class=\"input\"\n                placeholder=\"Number...\"\n                v-model=\"cUser.streetNumber\"\n              />\n              </div>\n              <div class=\"column is-three-quarters pt-0 pt-0\">\n                <label>City</label\n                ><input\n                name=\"city\"\n                class=\"input\"\n                placeholder=\"City...\"\n                v-model=\"cUser.city\"\n              />\n              </div>\n              <div class=\"column is-one-quarters pt-0\">\n                <label>Zipcode</label\n                ><input\n                name=\"postal_code\"\n                class=\"input\"\n                placeholder=\"Zipcode...\"\n                v-model=\"cUser.zipcode\"\n              />\n              </div>\n              <div class=\"column is-full pt-0\">\n                <label>Country</label\n                ><input\n                name=\"country\"\n                class=\"input\"\n                placeholder=\"Country...\"\n                v-model=\"cUser.country\"\n              />\n              </div>\n            </div>\n          </fieldset>\n          <b-button @click=\"putUser()\" type=\"is-success is-pulled-right mt-4\"\n          >Update\n          </b-button\n          >\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue } from 'vue-property-decorator'\nimport { IUserType } from '@/types/UserType'\nimport dateFormat from 'dateformat'\n\n@Component\nexport default class Profile extends Vue {\n  private cUser: IUserType\n  private formatedBirthdate: string\n\n  constructor () {\n    super()\n    this.cUser = this.$store.state.user\n    this.formatedBirthdate = dateFormat(new Date(this.cUser.birthdate * 1000), 'yyyy-mm-dd')\n  }\n\n  async putUser () {\n    const accessToken = await this.$auth.getTokenSilently()\n    console.log(accessToken)\n    const result = await fetch(encodeURI('/api/user/update'), {\n      method: 'PUT',\n      headers: {\n        Authorization: 'Bearer ' + accessToken\n      },\n      body: JSON.stringify({\n        userId: this.$auth.user.sub,\n        email: this.$auth.user.email,\n        firstname: this.cUser.firstname,\n        lastname: this.cUser.lastname,\n        birthdate: parseInt((new Date(this.formatedBirthdate).getTime() / 1000).toFixed(0)),\n        streetName: this.cUser.streetName,\n        streetNumber: this.cUser.streetNumber,\n        zipcode: this.cUser.zipcode,\n        city: this.cUser.city,\n        country: this.cUser.country\n      })\n    })\n    const data = await result.json()\n    console.log(data)\n  }\n}\n</script>\n"]}]}