{"remainingRequest":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erfalk/ws_filedgr/filedgr-streams-front/src/components/AppHeader.vue?vue&type=style&index=0&id=bb50a5e4&scoped=true&lang=css&","dependencies":[{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/src/components/AppHeader.vue","mtime":1605127685902},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KDQoubmF2YmFyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsNCn0NCg0KLm5hdmJhciBpbWcgew0KICBmbG9hdDogbGVmdDsNCiAgaGVpZ2h0OiA1MHB4Ow0KICBtYXJnaW4tbGVmdDogMTBweDsNCiAgZGlzcGxheTogaW5saW5lOw0KfQ0KDQoubmF2YmFyLXJpZ2h0IHsNCiAgZmxvYXQ6IHJpZ2h0Ow0KICBtYXJnaW4tcmlnaHQ6IDIwcHg7DQogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQogIGRpc3BsYXk6IGlubGluZTsNCn0NCg0KI25hdiBhIHsNCiAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogIGNvbG9yOiAjMmMzZTUwOw0KfQ0KDQojbmF2IGEucm91dGVyLWxpbmstZXhhY3QtYWN0aXZlIHsNCiAgY29sb3I6ICM0MmI5ODM7DQp9DQoNCg=="},{"version":3,"sources":["AppHeader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"AppHeader.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <nav class=\"navbar\" role=\"navigation\" aria-label=\"main navigation\">\r\n    <div class=\"navbar-brand\">\r\n      <a class=\"navbar-item\" href=\"https://filedgr.com/\">\r\n        <img src=\"../assets/filedgr-logo.png\">\r\n      </a>\r\n\r\n      <a role=\"button\" class=\"navbar-burger burger\" aria-label=\"menu\" aria-expanded=\"false\"\r\n         data-target=\"navbarBasicExample\">\r\n        <span aria-hidden=\"true\"></span>\r\n        <span aria-hidden=\"true\"></span>\r\n        <span aria-hidden=\"true\"></span>\r\n      </a>\r\n    </div>\r\n    <div id=\"navbarBasicExample\" class=\"navbar-menu\">\r\n\r\n      <div class=\"navbar-end\">\r\n        <div class=\"navbar-item\">\r\n          <div v-if=\"!$auth.loading\">\r\n            <b-button icon-left=\"login\" v-if=\"!$auth.isAuthenticated\" @click=\"login()\"> Log in</b-button>\r\n            <b-dropdown\r\n              v-if=\"$auth.isAuthenticated\"\r\n              v-model=\"navigation\"\r\n              position=\"is-bottom-left\"\r\n              append-to-body\r\n              aria-role=\"menu\">\r\n              <b-button class=\"navbar-item\"\r\n                        slot=\"trigger\"\r\n                        role=\"button\" icon-right=\"menu-down\">Menu\r\n              </b-button>\r\n              <b-dropdown-item custom aria-role=\"menuitem\">\r\n                <img :src=\"$auth.user.picture\">\r\n                Logged as <b>{{ $auth.user.name }}</b>\r\n              </b-dropdown-item>\r\n              <hr class=\"dropdown-divider\">\r\n              <b-dropdown-item @click=\"logout\" value=\"logout\" aria-role=\"menuitem\">\r\n                <b-icon icon=\"logout\"></b-icon>\r\n                Logout\r\n              </b-dropdown-item>\r\n            </b-dropdown>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </nav>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {Component, Vue} from 'vue-property-decorator'\r\nimport {IUserType} from '@/types/UserType'\r\nimport {IObjectType} from '@/types/ObjectType'\r\nimport {error} from \"vue-i18n/src/util\";\r\n\r\n@Component\r\nexport default class AppHeader extends Vue {\r\n  // Making the property reactive to get rid of the warning\r\n  private navigation: any = {}\r\n\r\n  private isPublic = true\r\n  logo = require('@/assets/filedgr-logo.png')\r\n\r\n  private mounted() {\r\n    this.getUser()\r\n    this.listObjects()\r\n  }\r\n\r\n  login() {\r\n    // eslint-disable-next-line @typescript-eslint/camelcase\r\n    this.$auth.loginWithRedirect({appState: {targetUrl: '/dashboard'}})\r\n  }\r\n\r\n  logout() {\r\n    this.$auth.logout({\r\n      returnTo: window.location.origin\r\n    })\r\n  }\r\n\r\n  async getUser() {\r\n    const accessToken = await this.$auth.getTokenSilently()\r\n    fetch(encodeURI('/api/user/get'), {\r\n      method: 'POST',\r\n      headers: {\r\n        Authorization: 'Bearer ' + accessToken\r\n      }\r\n    }).then(async response => {\r\n      const data: IUserType = await response.json() as IUserType\r\n      this.$store.state.user = data\r\n    })\r\n      .catch(error => {\r\n        console.error(\"There was an error!\", error)\r\n      })\r\n  }\r\n\r\n  async listObjects() {\r\n    const accessToken = await this.$auth.getTokenSilently()\r\n\r\n    const result = await fetch(encodeURI('/api/object/list'), {\r\n      method: 'POST',\r\n      headers: {\r\n        Authorization: 'Bearer ' + accessToken\r\n      }\r\n    })\r\n    const response: IObjectType[] = await result.json() as IObjectType[]\r\n    this.$store.state.objects = response\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.navbar {\r\n  background-color: #ffffff;\r\n}\r\n\r\n.navbar img {\r\n  float: left;\r\n  height: 50px;\r\n  margin-left: 10px;\r\n  display: inline;\r\n}\r\n\r\n.navbar-right {\r\n  float: right;\r\n  margin-right: 20px;\r\n  vertical-align: middle;\r\n  display: inline;\r\n}\r\n\r\n#nav a {\r\n  font-weight: bold;\r\n  color: #2c3e50;\r\n}\r\n\r\n#nav a.router-link-exact-active {\r\n  color: #42b983;\r\n}\r\n\r\n</style>\r\n"]}]}