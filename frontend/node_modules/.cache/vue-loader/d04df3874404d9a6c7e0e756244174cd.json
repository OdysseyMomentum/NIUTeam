{"remainingRequest":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erfalk/ws_filedgr/filedgr-streams-front/src/components/AppHeader.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/src/components/AppHeader.vue","mtime":1604677050556},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/erfalk/ws_filedgr/filedgr-streams-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJw0KaW1wb3J0IGRhdGVGb3JtYXQgZnJvbSAnZGF0ZWZvcm1hdCcNCg0KQENvbXBvbmVudA0KZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBwSGVhZGVyIGV4dGVuZHMgVnVlIHsNCiAgLy8gTWFraW5nIHRoZSBwcm9wZXJ0eSByZWFjdGl2ZSB0byBnZXQgcmlkIG9mIHRoZSB3YXJuaW5nDQogIHByaXZhdGUgbmF2aWdhdGlvbjogQW55ID0ge30NCg0KICBwcml2YXRlIGlzUHVibGljID0gdHJ1ZQ0KICBsb2dvID0gcmVxdWlyZSgnQC9hc3NldHMvZmlsZWRnci1sb2dvLnBuZycpDQoNCiAgcHJpdmF0ZSBtb3VudGVkICgpIHsNCiAgICB0aGlzLmdldFVzZXIoKQ0KICAgIHRoaXMubGlzdE9iamVjdHMoKQ0KICB9DQoNCiAgbG9naW4gKCkgew0KICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvY2FtZWxjYXNlDQogICAgdGhpcy4kYXV0aC5sb2dpbldpdGhSZWRpcmVjdCh7IGFwcFN0YXRlOiB7IHRhcmdldFVybDogJy9kYXNoYm9hcmQnIH0gfSkNCiAgfQ0KDQogIGxvZ291dCAoKSB7DQogICAgdGhpcy4kYXV0aC5sb2dvdXQoew0KICAgICAgcmV0dXJuVG86IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4NCiAgICB9KQ0KICB9DQoNCiAgYXN5bmMgZ2V0VXNlciAoKSB7DQogICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCB0aGlzLiRhdXRoLmdldFRva2VuU2lsZW50bHkoKQ0KICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZldGNoKGVuY29kZVVSSSgnL2FwaS91c2VyL2dldCcpLCB7DQogICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgYWNjZXNzVG9rZW4NCiAgICAgIH0NCiAgICB9KQ0KICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXN1bHQuanNvbigpDQogICAgdGhpcy4kc3RvcmUuc3RhdGUuZm5hbWUgPSBkYXRhLmZpcnN0bmFtZQ0KICAgIHRoaXMuJHN0b3JlLnN0YXRlLmxuYW1lID0gZGF0YS5sYXN0bmFtZQ0KICAgIHRoaXMuJHN0b3JlLnN0YXRlLmVtYWlsID0gZGF0YS5lbWFpbA0KICAgIHRoaXMuJHN0b3JlLnN0YXRlLmJkYXkgPSBkYXRlRm9ybWF0KG5ldyBEYXRlKGRhdGEuYmlydGhkYXRlKjEwMDApLCd5eXl5LW1tLWRkJykNCiAgICB0aGlzLiRzdG9yZS5zdGF0ZS5zdHJlZXQgPSBkYXRhLnN0cmVldE5hbWUNCiAgICB0aGlzLiRzdG9yZS5zdGF0ZS5zbnVtYmVyID0gZGF0YS5zdHJlZXROdW1iZXINCiAgICB0aGlzLiRzdG9yZS5zdGF0ZS5wb3N0YWxfY29kZSA9IGRhdGEuemlwY29kZQ0KICAgIHRoaXMuJHN0b3JlLnN0YXRlLmNpdHkgPSBkYXRhLmNpdHkNCiAgICB0aGlzLiRzdG9yZS5zdGF0ZS5jb3VudHJ5ID0gZGF0YS5jb3VudHJ5DQogIH0NCg0KICAgIGFzeW5jIGxpc3RPYmplY3RzICgpIHsNCiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHRoaXMuJGF1dGguZ2V0VG9rZW5TaWxlbnRseSgpDQogICAgY29uc29sZS5sb2coYWNjZXNzVG9rZW4pOw0KDQogICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZmV0Y2goZW5jb2RlVVJJKCcvYXBpL29iamVjdC9saXN0JyksIHsNCiAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgaGVhZGVyczogew0KICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyBhY2Nlc3NUb2tlbg0KICAgICAgfQ0KICAgIH0pDQogICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3VsdC5qc29uKCkNCiAgICB0aGlzLiRzdG9yZS5zdGF0ZS5vYmplY3RzID0gZGF0YQ0KICB9DQoNCn0NCg=="},{"version":3,"sources":["AppHeader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"AppHeader.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <nav class=\"navbar\" role=\"navigation\" aria-label=\"main navigation\">\r\n      <div class=\"navbar-brand\">\r\n        <a class=\"navbar-item\" href=\"https://filedgr.com/\">\r\n          <img src=\"../assets/filedgr-logo.png\">\r\n        </a>\r\n\r\n        <a role=\"button\" class=\"navbar-burger burger\" aria-label=\"menu\" aria-expanded=\"false\"\r\n           data-target=\"navbarBasicExample\">\r\n          <span aria-hidden=\"true\"></span>\r\n          <span aria-hidden=\"true\"></span>\r\n          <span aria-hidden=\"true\"></span>\r\n        </a>\r\n      </div>\r\n      <div id=\"navbarBasicExample\" class=\"navbar-menu\">\r\n\r\n        <div class=\"navbar-end\">\r\n          <div class=\"navbar-item\">\r\n            <div v-if=\"!$auth.loading\">\r\n              <b-button icon-left=\"login\" v-if=\"!$auth.isAuthenticated\" @click=\"login()\">  Log in </b-button>\r\n              <b-dropdown\r\n                    v-if=\"$auth.isAuthenticated\"\r\n                    v-model=\"navigation\"\r\n                    position=\"is-bottom-left\"\r\n                    append-to-body\r\n                    aria-role=\"menu\">\r\n                    <b-button class=\"navbar-item\"\r\n                        slot=\"trigger\"\r\n                        role=\"button\" icon-right=\"menu-down\">Menu</b-button>\r\n                    <b-dropdown-item custom aria-role=\"menuitem\">\r\n                        <img :src=\"$auth.user.picture\">\r\n                        Logged as <b>{{ $auth.user.name }}</b>\r\n                    </b-dropdown-item>\r\n                    <hr class=\"dropdown-divider\">\r\n                    <b-dropdown-item @click=\"logout\" value=\"logout\" aria-role=\"menuitem\" >\r\n                        <b-icon icon=\"logout\"></b-icon>\r\n                        Logout\r\n                    </b-dropdown-item>\r\n                </b-dropdown>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue } from 'vue-property-decorator'\r\nimport dateFormat from 'dateformat'\r\n\r\n@Component\r\nexport default class AppHeader extends Vue {\r\n  // Making the property reactive to get rid of the warning\r\n  private navigation: Any = {}\r\n\r\n  private isPublic = true\r\n  logo = require('@/assets/filedgr-logo.png')\r\n\r\n  private mounted () {\r\n    this.getUser()\r\n    this.listObjects()\r\n  }\r\n\r\n  login () {\r\n    // eslint-disable-next-line @typescript-eslint/camelcase\r\n    this.$auth.loginWithRedirect({ appState: { targetUrl: '/dashboard' } })\r\n  }\r\n\r\n  logout () {\r\n    this.$auth.logout({\r\n      returnTo: window.location.origin\r\n    })\r\n  }\r\n\r\n  async getUser () {\r\n    const accessToken = await this.$auth.getTokenSilently()\r\n    const result = await fetch(encodeURI('/api/user/get'), {\r\n      method: 'POST',\r\n      headers: {\r\n        Authorization: 'Bearer ' + accessToken\r\n      }\r\n    })\r\n    const data = await result.json()\r\n    this.$store.state.fname = data.firstname\r\n    this.$store.state.lname = data.lastname\r\n    this.$store.state.email = data.email\r\n    this.$store.state.bday = dateFormat(new Date(data.birthdate*1000),'yyyy-mm-dd')\r\n    this.$store.state.street = data.streetName\r\n    this.$store.state.snumber = data.streetNumber\r\n    this.$store.state.postal_code = data.zipcode\r\n    this.$store.state.city = data.city\r\n    this.$store.state.country = data.country\r\n  }\r\n\r\n    async listObjects () {\r\n    const accessToken = await this.$auth.getTokenSilently()\r\n    console.log(accessToken);\r\n\r\n    const result = await fetch(encodeURI('/api/object/list'), {\r\n      method: 'POST',\r\n      headers: {\r\n        Authorization: 'Bearer ' + accessToken\r\n      }\r\n    })\r\n    const data = await result.json()\r\n    this.$store.state.objects = data\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.navbar {\r\n  background-color: #ffffff;\r\n}\r\n\r\n.navbar img {\r\n  float: left;\r\n  height: 50px;\r\n  margin-left: 10px;\r\n  display: inline;\r\n}\r\n\r\n.navbar-right {\r\n  float: right;\r\n  margin-right: 20px;\r\n  vertical-align: middle;\r\n  display: inline;\r\n}\r\n\r\n#nav {\r\n  /*width: 50%;*/\r\n  /*padding: 20px;*/\r\n}\r\n\r\n#nav a {\r\n  font-weight: bold;\r\n  color: #2c3e50;\r\n}\r\n\r\n#nav a.router-link-exact-active {\r\n  color: #42b983;\r\n}\r\n\r\n</style>\r\n"]}]}